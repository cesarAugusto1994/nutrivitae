/*!
 * FullCalendar v2.2.7
 * Docs & License: http://arshaw.com/fullcalendar/
 * (c) 2013 Adam Shaw
 */
!function(t){"function"==typeof define&&define.amd?define(["jquery","moment"],t):t(jQuery,moment)}(function(t,e){function n(t){i(bt,t)}function i(e){function n(n,s){t.isPlainObject(s)&&t.isPlainObject(e[n])&&!o(n)?e[n]=i({},e[n],s):void 0!==s&&(e[n]=s)}for(var s=1;arguments.length>s;s++)t.each(arguments[s],n);return e}function o(t){return/(Time|Duration)$/.test(t)}function s(t){var n=e.localeData||e.langData;return n.call(e,t)||n.call(e,"en")}function r(t,e){e.left&&t.css({"border-left-width":1,"margin-left":e.left-1}),e.right&&t.css({"border-right-width":1,"margin-right":e.right-1})}function a(t){t.css({"margin-left":"","margin-right":"","border-left-width":"","border-right-width":""})}function l(){t("body").addClass("fc-not-allowed")}function d(){t("body").removeClass("fc-not-allowed")}function c(e,n,i){var o=Math.floor(n/e.length),s=Math.floor(n-o*(e.length-1)),r=[],a=[],l=[],d=0;u(e),e.each(function(n,i){var c=n===e.length-1?s:o,u=t(i).outerHeight(!0);c>u?(r.push(i),a.push(u),l.push(t(i).height())):d+=u}),i&&(n-=d,o=Math.floor(n/r.length),s=Math.floor(n-o*(r.length-1))),t(r).each(function(e,n){var i=e===r.length-1?s:o,d=a[e],c=l[e],u=i-(d-c);i>d&&t(n).height(u)})}function u(t){t.height("")}function h(e){var n=0;return e.find("> *").each(function(e,i){var o=t(i).outerWidth();o>n&&(n=o)}),n++,e.width(n),n}function f(t,e){return t.height(e).addClass("fc-scroller"),t[0].scrollHeight-1>t[0].clientHeight||(p(t),!1)}function p(t){t.height("").removeClass("fc-scroller")}function g(e){var n=e.css("position"),i=e.parents().filter(function(){var e=t(this);return/(auto|scroll)/.test(e.css("overflow")+e.css("overflow-y")+e.css("overflow-x"))}).eq(0);return"fixed"!==n&&i.length?i:t(e[0].ownerDocument||document)}function m(t){var e=t.offset().left,n=e+t.width(),i=t.children(),o=i.offset().left;return{left:o-e,right:n-(o+i.outerWidth())}}function v(t){return 1==t.which&&!t.ctrlKey}function y(t,e){var n,i,o,s,r=t.start,a=t.end,l=e.start,d=e.end;return a>l&&d>r?(r>=l?(n=r.clone(),o=!0):(n=l.clone(),o=!1),d>=a?(i=a.clone(),s=!0):(i=d.clone(),s=!1),{start:n,end:i,isStart:o,isEnd:s}):void 0}function w(t,e){if(t=t||{},void 0!==t[e])return t[e];for(var n,i=e.split(/(?=[A-Z])/),o=i.length-1;o>=0;o--)if(void 0!==(n=t[i[o].toLowerCase()]))return n;return t["default"]}function b(t,n){return e.duration({days:t.clone().stripTime().diff(n.clone().stripTime(),"days"),ms:t.time()-n.time()})}function C(t,n){return e.duration({days:t.clone().stripTime().diff(n.clone().stripTime(),"days")})}function E(t,e){var n,i,o;for(n=0;It.length>n&&(i=It[n],!((o=S(i,t,e))>=1&&A(o)));n++);return i}function S(t,n,i){return null!=i?i.diff(n,t,!0):e.isDuration(n)?n.as(t):n.end.diff(n.start,t,!0)}function D(t){return"[object Date]"===Object.prototype.toString.call(t)||t instanceof Date}function T(t){return/^\d+\:\d+(?:\:\d+\.?(?:\d{3})?)?$/.test(t)}function _(t){var e=function(){};return e.prototype=t,new e}function x(t,e){for(var n in t)H(t,n)&&(e[n]=t[n])}function H(t,e){return Ot.call(t,e)}function R(e){return/undefined|null|boolean|number|string/.test(t.type(e))}function k(e,n,i){if(t.isFunction(e)&&(e=[e]),e){var o,s;for(o=0;e.length>o;o++)s=e[o].apply(n,i)||s;return s}}function M(){for(var t=0;arguments.length>t;t++)if(void 0!==arguments[t])return arguments[t]}function I(t){return(t+"").replace(/&/g,"&amp;").replace(/</g,"&lt;").replace(/>/g,"&gt;").replace(/'/g,"&#039;").replace(/"/g,"&quot;").replace(/\n/g,"<br />")}function O(t){return t.replace(/&.*?;/g,"")}function P(t){return t.charAt(0).toUpperCase()+t.slice(1)}function F(t,e){return t-e}function A(t){return 0==t%1}function B(t,e){var n,i,o,s,r=function(){var a=+new Date-s;e>a&&a>0?n=setTimeout(r,e-a):(n=null,t.apply(o,i),n||(o=i=null))};return function(){o=this,i=arguments,s=+new Date,n||(n=setTimeout(r,e))}}function L(n,i,o){var s,r,a,l,d=n[0],c=1==n.length&&"string"==typeof d;return e.isMoment(d)?(l=e.apply(null,n),z(d,l)):D(d)||void 0===d?l=e.apply(null,n):(s=!1,r=!1,c?Pt.test(d)?(d+="-01",n=[d],s=!0,r=!0):(a=Ft.exec(d))&&(s=!a[5],r=!0):t.isArray(d)&&(r=!0),l=i||s?e.utc.apply(e,n):e.apply(null,n),s?(l._ambigTime=!0,l._ambigZone=!0):o&&(r?l._ambigZone=!0:c&&l.zone(d))),l._fullCalendar=!0,l}function N(t,n){var i,o,s=!1,r=!1,a=t.length,l=[];for(i=0;a>i;i++)o=t[i],e.isMoment(o)||(o=St.moment.parseZone(o)),s=s||o._ambigTime,r=r||o._ambigZone,l.push(o);for(i=0;a>i;i++)o=l[i],n||!s||o._ambigTime?r&&!o._ambigZone&&(l[i]=o.clone().stripZone()):l[i]=o.clone().stripTime();return l}function z(t,e){t._ambigTime?e._ambigTime=!0:e._ambigTime&&(e._ambigTime=!1),t._ambigZone?e._ambigZone=!0:e._ambigZone&&(e._ambigZone=!1)}function V(t,e){t.year(e[0]||0).month(e[1]||0).date(e[2]||0).hours(e[3]||0).minutes(e[4]||0).seconds(e[5]||0).milliseconds(e[6]||0)}function G(t,e){return Bt.format.call(t,e)}function Y(t,e){return $(t,q(e))}function $(t,e){var n,i="";for(n=0;e.length>n;n++)i+=W(t,e[n]);return i}function W(t,e){var n,i;return"string"==typeof e?e:(n=e.token)?Lt[n]?Lt[n](t):G(t,n):e.maybe&&(i=$(t,e.maybe),i.match(/[1-9]/))?i:""}function Z(t,e,n,i,o){var s;return t=St.moment.parseZone(t),e=St.moment.parseZone(e),s=(t.localeData||t.lang).call(t),n=s.longDateFormat(n)||n,i=i||" - ",j(t,e,q(n),i,o)}function j(t,e,n,i,o){var s,r,a,l,d="",c="",u="",h="",f="";for(r=0;n.length>r&&!1!==(s=X(t,e,n[r]));r++)d+=s;for(a=n.length-1;a>r&&!1!==(s=X(t,e,n[a]));a--)c=s+c;for(l=r;a>=l;l++)u+=W(t,n[l]),h+=W(e,n[l]);return(u||h)&&(f=o?h+i+u:u+i+h),d+f+c}function X(t,e,n){var i,o;return"string"==typeof n?n:!!((i=n.token)&&(o=Nt[i.charAt(0)])&&t.isSame(e,o))&&G(t,i)}function q(t){return t in zt?zt[t]:zt[t]=U(t)}function U(t){for(var e,n=[],i=/\[([^\]]*)\]|\(([^\)]*)\)|(LT|(\w)\4*o?)|([^\w\[\(]+)/g;e=i.exec(t);)e[1]?n.push(e[1]):e[2]?n.push({maybe:U(e[2])}):e[3]?n.push({token:e[3]}):e[5]&&n.push(e[5]);return n}function Q(){}function K(t,e){return!t&&!e||!(!t||!e)&&(t.grid===e.grid&&t.row===e.row&&t.col===e.col)}function J(t){var e=et(t);return"background"===e||"inverse-background"===e}function tt(t){return"inverse-background"===et(t)}function et(t){return M((t.source||{}).rendering,t.rendering)}function nt(t){var e,n,i={};for(e=0;t.length>e;e++)n=t[e],(i[n._id]||(i[n._id]=[])).push(n);return i}function it(t,e){return t.eventStartMS-e.eventStartMS}function ot(t,e){return t.eventStartMS-e.eventStartMS||e.eventDurationMS-t.eventDurationMS||e.event.allDay-t.event.allDay||(t.event.title||"").localeCompare(e.event.title)}function st(n){var i,o,s,r,a=St.dataAttrPrefix;return a&&(a+="-"),i=n.data(a+"event")||null,i&&(i="object"==typeof i?t.extend({},i):{},o=i.start,null==o&&(o=i.time),s=i.duration,r=i.stick,delete i.start,delete i.time,delete i.duration,delete i.stick),null==o&&(o=n.data(a+"start")),null==o&&(o=n.data(a+"time")),null==s&&(s=n.data(a+"duration")),null==r&&(r=n.data(a+"stick")),o=null!=o?e.duration(o):null,s=null!=s?e.duration(s):null,r=Boolean(r),{eventProps:i,startTime:o,duration:s,stick:r}}function rt(t,e){var n,i;for(n=0;e.length>n;n++)if(i=e[n],i.leftCol<=t.rightCol&&i.rightCol>=t.leftCol)return!0;return!1}function at(t,e){return t.leftCol-e.leftCol}function lt(t){var e,n,i;if(t.sort(ot),e=dt(t),ct(e),n=e[0]){for(i=0;n.length>i;i++)ut(n[i]);for(i=0;n.length>i;i++)ht(n[i],0,0)}}function dt(t){var e,n,i,o=[];for(e=0;t.length>e;e++){for(n=t[e],i=0;o.length>i&&ft(n,o[i]).length;i++);n.level=i,(o[i]||(o[i]=[])).push(n)}return o}function ct(t){var e,n,i,o,s;for(e=0;t.length>e;e++)for(n=t[e],i=0;n.length>i;i++)for(o=n[i],o.forwardSegs=[],s=e+1;t.length>s;s++)ft(o,t[s],o.forwardSegs)}function ut(t){var e,n,i=t.forwardSegs,o=0;if(void 0===t.forwardPressure){for(e=0;i.length>e;e++)n=i[e],ut(n),o=Math.max(o,1+n.forwardPressure);t.forwardPressure=o}}function ht(t,e,n){var i,o=t.forwardSegs;if(void 0===t.forwardCoord)for(o.length?(o.sort(gt),ht(o[0],e+1,n),t.forwardCoord=o[0].backwardCoord):t.forwardCoord=1,t.backwardCoord=t.forwardCoord-(t.forwardCoord-n)/(e+1),i=0;o.length>i;i++)ht(o[i],0,t.forwardCoord)}function ft(t,e,n){n=n||[];for(var i=0;e.length>i;i++)pt(t,e[i])&&n.push(e[i]);return n}function pt(t,e){return t.bottom>e.top&&t.top<e.bottom}function gt(t,e){return e.forwardPressure-t.forwardPressure||(t.backwardCoord||0)-(e.backwardCoord||0)||ot(t,e)}function mt(n,o){function r(t){return(t.locale||t.lang).call(t,K.lang).humanize()}function a(t){it?c()&&(v(),u(t)):l()}function l(){ot=K.theme?"ui":"fc",n.addClass("fc"),K.isRTL?n.addClass("fc-rtl"):n.addClass("fc-ltr"),K.theme?n.addClass("ui-widget"):n.addClass("fc-unthemed"),it=t("<div class='fc-view-container'/>").prependTo(n),et=new vt(U,K),nt=et.render(),nt&&n.prepend(nt),u(K.defaultView),K.handleWindowResize&&(at=B(w,K.windowResizeDelay),t(window).resize(at))}function d(){st&&st.destroyView(),et.destroy(),it.remove(),n.removeClass("fc fc-ltr fc-rtl fc-unthemed ui-widget"),t(window).unbind("resize",at)}function c(){return n.is(":visible")}function u(e){ft++,st&&e&&st.type!==e&&(et.deactivateButton(st.type),$(),st.start&&st.destroyView(),st.el.remove(),st=null),!st&&e&&(st=h(e),st.el=t("<div class='fc-view fc-"+e+"-view' />").appendTo(it),et.activateButton(e)),st&&(lt=st.massageCurrentDate(lt),st.start&&lt.isWithin(st.intervalStart,st.intervalEnd)||c()&&($(),st.start&&st.destroyView(),st.setDate(lt),st.renderView(),W(),R(),k(),D())),W(),ft--}function h(t){var e=f(t);return new e["class"](U,e.options,t)}function f(n){function i(e){"function"==typeof e?s=e:"object"==typeof e&&t.extend(o,e)}var o,s,a,l,d,c=K.defaultButtonText||{},u=K.buttonText||{},h=K.views||{},f=n,p=[],g=!1;if(ht[n])return ht[n];for(;f&&!s;)o={},i(Dt[f]),i(h[f]),p.unshift(o),f=o.type;return p.unshift({}),o=t.extend.apply(t,p),s?(a=o.duration||s.duration,a&&(a=e.duration(a),l=E(a),g=1===a.as(l)),g&&h[l]&&(o=t.extend({},h[l],o)),d=u[n]||(g?u[l]:null)||c[n]||(g?c[l]:null)||o.buttonText||s.buttonText||(a?r(a):null)||n,ht[n]={"class":s,options:o,buttonText:d}):void 0}function p(t){return Boolean(f(t))}function g(t){var e=f(t);return e?e.buttonText:void 0}function m(t){return c()?(t&&y(),ft++,st.updateSize(!0),ft--,!0):void 0}function v(){c()&&y()}function y(){rt="number"==typeof K.contentHeight?K.contentHeight:"number"==typeof K.height?K.height-(nt?nt.outerHeight(!0):0):Math.round(it.width()/Math.max(K.aspectRatio,.5))}function w(t){!ft&&t.target===window&&st.start&&m(!0)&&st.trigger("windowResize",ut)}function b(){S(),T()}function C(){c()&&($(),st.destroyViewEvents(),st.renderViewEvents(pt),W())}function S(){$(),st.destroyViewEvents(),W()}function D(){!K.lazyFetching||dt(st.start,st.end)?T():C()}function T(){ct(st.start,st.end)}function x(t){pt=t,C()}function H(){C()}function R(){et.updateTitle(st.title)}function k(){U.getNow().isWithin(st.intervalStart,st.intervalEnd)?et.disableButton("today"):et.enableButton("today")}function M(t,e){t=U.moment(t),e=e?U.moment(e):t.hasTime()?t.clone().add(U.defaultTimedEventDuration):t.clone().add(U.defaultAllDayEventDuration),st.select({start:t,end:e})}function I(){st&&st.unselect()}function O(){lt=st.computePrevDate(lt),u()}function F(){lt=st.computeNextDate(lt),u()}function A(){lt.add(-1,"years"),u()}function L(){lt.add(1,"years"),u()}function N(){lt=U.getNow(),u()}function z(t){lt=U.moment(t),u()}function V(t){lt.add(e.duration(t)),u()}function G(t,e){var n,i;e&&p(e)||(e=e||"day",n=et.getViewsWithButtons().join(" "),i=n.match(RegExp("\\w+"+P(e))),i||(i=n.match(/\w+Day/)),e=i?i[0]:"agendaDay"),lt=t,u(e)}function Y(){return lt.clone()}function $(){it.css({width:"100%",height:it.height(),overflow:"hidden"})}function W(){it.css({width:"",height:"",overflow:""})}function Z(){return U}function j(){return st}function X(t,e){return void 0===e?K[t]:void(("height"==t||"contentHeight"==t||"aspectRatio"==t)&&(K[t]=e,m(!0)))}function q(t,e){return K[t]?K[t].apply(e||ut,Array.prototype.slice.call(arguments,2)):void 0}var U=this;o=o||{};var Q,K=i({},bt,o);Q=K.lang in Tt?Tt[K.lang]:Tt[bt.lang],Q&&(K=i({},bt,Q,o)),K.isRTL&&(K=i({},bt,Et,Q||{},o)),U.options=K,U.render=a,U.destroy=d,U.refetchEvents=b,U.reportEvents=x,U.reportEventChange=H,U.rerenderEvents=C,U.changeView=u,U.select=M,U.unselect=I,U.prev=O,U.next=F,U.prevYear=A,U.nextYear=L,U.today=N,U.gotoDate=z,U.incrementDate=V,U.zoomTo=G,U.getDate=Y,U.getCalendar=Z,U.getView=j,U.option=X,U.trigger=q,U.isValidViewType=p,U.getViewButtonText=g;var J=_(s(K.lang));if(K.monthNames&&(J._months=K.monthNames),K.monthNamesShort&&(J._monthsShort=K.monthNamesShort),K.dayNames&&(J._weekdays=K.dayNames),K.dayNamesShort&&(J._weekdaysShort=K.dayNamesShort),null!=K.firstDay){var tt=_(J._week);tt.dow=K.firstDay,J._week=tt}U.defaultAllDayEventDuration=e.duration(K.defaultAllDayEventDuration),U.defaultTimedEventDuration=e.duration(K.defaultTimedEventDuration),U.moment=function(){var t;return"local"===K.timezone?(t=St.moment.apply(null,arguments),t.hasTime()&&t.local()):t="UTC"===K.timezone?St.moment.utc.apply(null,arguments):St.moment.parseZone.apply(null,arguments),"_locale"in t?t._locale=J:t._lang=J,t},U.getIsAmbigTimezone=function(){return"local"!==K.timezone&&"UTC"!==K.timezone},U.rezoneDate=function(t){return U.moment(t.toArray())},U.getNow=function(){var t=K.now;return"function"==typeof t&&(t=t()),U.moment(t)},U.calculateWeekNumber=function(t){var e=K.weekNumberCalculation;return"function"==typeof e?e(t):"local"===e?t.week():"ISO"===e.toUpperCase()?t.isoWeek():void 0},U.getEventEnd=function(t){return t.end?t.end.clone():U.getDefaultEventEnd(t.allDay,t.start)},U.getDefaultEventEnd=function(t,e){var n=e.clone();return t?n.stripTime().add(U.defaultAllDayEventDuration):n.add(U.defaultTimedEventDuration),U.getIsAmbigTimezone()&&n.stripZone(),n},yt.call(U,K);var et,nt,it,ot,st,rt,at,lt,dt=U.isFetchNeeded,ct=U.fetchEvents,ut=n[0],ht={},ft=0,pt=[];lt=null!=K.defaultDate?U.moment(K.defaultDate):U.getNow(),U.getSuggestedViewHeight=function(){return void 0===rt&&v(),rt},U.isHeightAuto=function(){return"auto"===K.contentHeight||"auto"===K.height}}function vt(e,n){function i(){var e=n.header;return f=n.theme?"ui":"fc",e?p=t("<div class='fc-toolbar'/>").append(s("left")).append(s("right")).append(s("center")).append('<div class="fc-clear"/>'):void 0}function o(){p.remove()}function s(i){var o=t('<div class="fc-'+i+'"/>'),s=n.header[i];return s&&t.each(s.split(" "),function(){var i,s=t(),r=!0;t.each(this.split(","),function(i,o){var a,l,d,c,u,h,p,m,v;"title"==o?(s=s.add(t("<h2>&nbsp;</h2>")),r=!1):(e[o]?a=function(){e[o]()}:e.isValidViewType(o)&&(a=function(){e.changeView(o)},g.push(o),u=e.getViewButtonText(o)),a&&(l=w(n.themeButtonIcons,o),d=w(n.buttonIcons,o),c=w(n.defaultButtonText,o),h=w(n.buttonText,o),p=u||h?I(u||h):l&&n.theme?"<span class='ui-icon ui-icon-"+l+"'></span>":d&&!n.theme?"<span class='fc-icon fc-icon-"+d+"'></span>":I(c||o),m=["fc-"+o+"-button",f+"-button",f+"-state-default"],v=t('<button type="button" class="'+m.join(" ")+'">'+p+"</button>").click(function(){v.hasClass(f+"-state-disabled")||(a(),(v.hasClass(f+"-state-active")||v.hasClass(f+"-state-disabled"))&&v.removeClass(f+"-state-hover"))}).mousedown(function(){v.not("."+f+"-state-active").not("."+f+"-state-disabled").addClass(f+"-state-down")}).mouseup(function(){v.removeClass(f+"-state-down")}).hover(function(){v.not("."+f+"-state-active").not("."+f+"-state-disabled").addClass(f+"-state-hover")},function(){v.removeClass(f+"-state-hover").removeClass(f+"-state-down")}),s=s.add(v)))}),r&&s.first().addClass(f+"-corner-left").end().last().addClass(f+"-corner-right").end(),s.length>1?(i=t("<div/>"),r&&i.addClass("fc-button-group"),i.append(s),o.append(i)):o.append(s)}),o}function r(t){p.find("h2").text(t)}function a(t){p.find(".fc-"+t+"-button").addClass(f+"-state-active")}function l(t){p.find(".fc-"+t+"-button").removeClass(f+"-state-active")}function d(t){p.find(".fc-"+t+"-button").attr("disabled","disabled").addClass(f+"-state-disabled")}function c(t){p.find(".fc-"+t+"-button").removeAttr("disabled").removeClass(f+"-state-disabled")}function u(){return g}var h=this;h.render=i,h.destroy=o,h.updateTitle=r,h.activateButton=a,h.deactivateButton=l,h.disableButton=d,h.enableButton=c,h.getViewsWithButtons=u;var f,p=t(),g=[]}function yt(n){function i(t,e){return!G||t.clone().stripZone()<G.clone().stripZone()||e.clone().stripZone()>Y.clone().stripZone()}function o(t,e){G=t,Y=e,K=[];var n=++q,i=X.length;U=i;for(var o=0;i>o;o++)s(X[o],n)}function s(e,n){r(e,function(i){var o,s,r,a=t.isArray(e.events);if(n==q){if(i)for(o=0;i.length>o;o++)s=i[o],(r=a?s:E(s,e))&&K.push.apply(K,x(r));--U||Z(K)}})}function r(e,i){var o,s,a=St.sourceFetchers;for(o=0;a.length>o;o++){if(!0===(s=a[o].call(V,e,G.clone(),Y.clone(),n.timezone,i)))return;if("object"==typeof s)return void r(s,i)}var l=e.events;if(l)t.isFunction(l)?(y(),l.call(V,G.clone(),Y.clone(),n.timezone,function(t){i(t),w()})):t.isArray(l)?i(l):i();else{if(e.url){var d,c=e.success,u=e.error,h=e.complete;d=t.isFunction(e.data)?e.data():e.data;var f=t.extend({},d||{}),p=M(e.startParam,n.startParam),g=M(e.endParam,n.endParam),m=M(e.timezoneParam,n.timezoneParam);p&&(f[p]=G.format()),g&&(f[g]=Y.format()),n.timezone&&"local"!=n.timezone&&(f[m]=n.timezone),y(),t.ajax(t.extend({},Qt,e,{data:f,success:function(e){e=e||[];var n=k(c,this,arguments);t.isArray(n)&&(e=n),i(e)},error:function(){k(u,this,arguments),i()},complete:function(){k(h,this,arguments),w()}}))}else i()}}function a(t){var e=l(t);e&&(X.push(e),U++,s(e,q))}function l(e){var n,i,o=St.sourceNormalizers;if(t.isFunction(e)||t.isArray(e)?n={events:e}:"string"==typeof e?n={url:e}:"object"==typeof e&&(n=t.extend({},e)),n){for(n.className?"string"==typeof n.className&&(n.className=n.className.split(/\s+/)):n.className=[],t.isArray(n.events)&&(n.origArray=n.events,n.events=t.map(n.events,function(t){return E(t,n)})),i=0;o.length>i;i++)o[i].call(V,n);return n}}function d(e){X=t.grep(X,function(t){return!c(t,e)}),K=t.grep(K,function(t){return!c(t.source,e)}),Z(K)}function c(t,e){return t&&e&&u(t)==u(e)}function u(t){return("object"==typeof t?t.origArray||t.googleCalendarId||t.url||t.events:null)||t}function h(t){t.start=V.moment(t.start),t.end=t.end?V.moment(t.end):null,H(t,f(t)),Z(K)}function f(e){var n={};return t.each(e,function(t,e){p(t)&&void 0!==e&&R(e)&&(n[t]=e)}),n}function p(t){return!/^_|^(id|allDay|start|end)$/.test(t)}function g(t,e){var n,i,o,s=E(t);if(s){for(n=x(s),i=0;n.length>i;i++)o=n[i],o.source||(e&&(j.events.push(o),o.source=j),K.push(o));return Z(K),n}return[]}function m(e){var n,i;for(null==e?e=function(){return!0}:t.isFunction(e)||(n=e+"",e=function(t){return t._id==n}),K=t.grep(K,e,!0),i=0;X.length>i;i++)t.isArray(X[i].events)&&(X[i].events=t.grep(X[i].events,e,!0));Z(K)}function v(e){return t.isFunction(e)?t.grep(K,e):null!=e?(e+="",t.grep(K,function(t){return t._id==e})):K}function y(){Q++||$("loading",null,!0,W())}function w(){--Q||$("loading",null,!1,W())}function E(i,o){var s,r,a,l={};if(n.eventDataTransform&&(i=n.eventDataTransform(i)),o&&o.eventDataTransform&&(i=o.eventDataTransform(i)),t.extend(l,i),o&&(l.source=o),l._id=i._id||(void 0===i.id?"_fc"+Kt++:i.id+""),l.className=i.className?"string"==typeof i.className?i.className.split(/\s+/):i.className:[],s=i.start||i.date,r=i.end,T(s)&&(s=e.duration(s)),T(r)&&(r=e.duration(r)),i.dow||e.isDuration(s)||e.isDuration(r))l.start=s?e.duration(s):null,l.end=r?e.duration(r):null,l._recurring=!0;else{if(s&&(s=V.moment(s),!s.isValid()))return!1;r&&(r=V.moment(r),r.isValid()||(r=null)),a=i.allDay,void 0===a&&(a=M(o?o.allDayDefault:void 0,n.allDayDefault)),S(s,r,a,l)}return l}function S(t,e,n,i){i.start=t,i.end=e,i.allDay=n,D(i),wt(i)}function D(t){null==t.allDay&&(t.allDay=!(t.start.hasTime()||t.end&&t.end.hasTime())),t.allDay?(t.start.stripTime(),t.end&&t.end.stripTime()):(t.start.hasTime()||(t.start=V.rezoneDate(t.start)),t.end&&!t.end.hasTime()&&(t.end=V.rezoneDate(t.end))),t.end&&!t.end.isAfter(t.start)&&(t.end=null),t.end||(t.end=n.forceEventDuration?V.getDefaultEventEnd(t.allDay,t.start):null)}function _(t){var e;return t.end||(e=t.allDay,null==e&&(e=!t.start.hasTime()),t={start:t.start,end:V.getDefaultEventEnd(e,t.start)}),t}function x(e,n,i){var o,s,r,a,l,d,c,u,h,f=[];if(n=n||G,i=i||Y,e)if(e._recurring){if(s=e.dow)for(o={},r=0;s.length>r;r++)o[s[r]]=!0;for(a=n.clone().stripTime();a.isBefore(i);)(!o||o[a.day()])&&(l=e.start,d=e.end,c=a.clone(),u=null,l&&(c=c.time(l)),d&&(u=a.clone().time(d)),h=t.extend({},e),S(c,u,!l&&!d,h),f.push(h)),a.add(1,"days")}else f.push(e);return f}function H(e,n){var i,o,s,r,a={};return n=n||{},n.start||(n.start=e.start.clone()),void 0===n.end&&(n.end=e.end?e.end.clone():null),null==n.allDay&&(n.allDay=e.allDay),D(n),i=null!==e._end&&null===n.end,o=n.allDay?C(n.start,e._start):b(n.start,e._start),!i&&n.end&&(s=b(n.end,n.start).subtract(b(e._end||V.getDefaultEventEnd(e._allDay,e._start),e._start))),t.each(n,function(t,e){p(t)&&void 0!==e&&(a[t]=e)}),r=I(v(e._id),i,n.allDay,o,s,a),{dateDelta:o,durationDelta:s,undo:r}}function I(e,n,i,o,s,r){var a=V.getIsAmbigTimezone(),l=[];return o&&!o.valueOf()&&(o=null),s&&!s.valueOf()&&(s=null),t.each(e,function(e,d){var c,u;c={start:d.start.clone(),end:d.end?d.end.clone():null,allDay:d.allDay},t.each(r,function(t){c[t]=d[t]}),u={start:d._start,end:d._end,allDay:d._allDay},n&&(u.end=null),u.allDay=i,D(u),o&&(u.start.add(o),u.end&&u.end.add(o)),s&&(u.end||(u.end=V.getDefaultEventEnd(u.allDay,u.start)),u.end.add(s)),a&&!u.allDay&&(o||s)&&(u.start.stripZone(),u.end&&u.end.stripZone()),t.extend(d,r,u),wt(d),l.push(function(){t.extend(d,c),wt(d)})}),function(){for(var t=0;l.length>t;t++)l[t]()}}function O(){var e,i=n.businessHours,o={className:"fc-nonbusiness",start:"09:00",end:"17:00",dow:[1,2,3,4,5],rendering:"inverse-background"},s=V.getView();return i&&(e="object"==typeof i?t.extend({},o,i):o),e?x(E(e),s.start,s.end):[]}function P(t,e){var i=e.source||{},o=M(e.constraint,i.constraint,n.eventConstraint),s=M(e.overlap,i.overlap,n.eventOverlap);return t=_(t),B(t,o,s,e)}function F(t){return B(t,n.selectConstraint,n.selectOverlap)}function A(e,n){var i,o;return n&&(i=t.extend({},n,e),o=x(E(i))[0]),o?P(e,o):(e=_(e),F(e))}function B(t,e,n,i){var o,s,r,a,l;if(t={start:t.start.clone().stripZone(),end:t.end.clone().stripZone()},null!=e){for(o=L(e),s=!1,r=0;o.length>r;r++)if(N(o[r],t)){s=!0;break}if(!s)return!1}for(r=0;K.length>r;r++)if(a=K[r],(!i||i._id!==a._id)&&z(a,t)){if(!1===n)return!1;if("function"==typeof n&&!n(a,i))return!1;if(i){if(!1===(l=M(a.overlap,(a.source||{}).overlap)))return!1;if("function"==typeof l&&!l(i,a))return!1}}return!0}function L(t){return"businessHours"===t?O():"object"==typeof t?x(E(t)):v(t)}function N(t,e){var n=t.start.clone().stripZone(),i=V.getEventEnd(t).stripZone();return e.start>=n&&i>=e.end}function z(t,e){var n=t.start.clone().stripZone();return V.getEventEnd(t).stripZone()>e.start&&e.end>n}var V=this;V.isFetchNeeded=i,V.fetchEvents=o,V.addEventSource=a,V.removeEventSource=d,V.updateEvent=h,V.renderEvent=g,V.removeEvents=m,V.clientEvents=v,V.mutateEvent=H,V.normalizeEventDateProps=D,V.ensureVisibleEventRange=_;var G,Y,$=V.trigger,W=V.getView,Z=V.reportEvents,j={events:[]},X=[j],q=0,U=0,Q=0,K=[];t.each((n.events?[n.events]:[]).concat(n.eventSources||[]),function(t,e){var n=l(e);n&&X.push(n)}),V.getBusinessHoursEvents=O,V.isEventRangeAllowed=P,V.isSelectionRangeAllowed=F,V.isExternalDropRangeAllowed=A}function wt(t){t._allDay=t.allDay,t._start=t.start.clone(),t._end=t.end?t.end.clone():null}var bt={titleRangeSeparator:" \u2014 ",monthYearFormat:"MMMM YYYY",defaultTimedEventDuration:"02:00:00",defaultAllDayEventDuration:{days:1},forceEventDuration:!1,nextDayThreshold:"09:00:00",defaultView:"month",aspectRatio:1.35,header:{left:"title",center:"",right:"today prev,next"},weekends:!0,weekNumbers:!1,weekNumberTitle:"W",weekNumberCalculation:"local",lazyFetching:!0,startParam:"start",endParam:"end",timezoneParam:"timezone",timezone:!1,isRTL:!1,defaultButtonText:{prev:"prev",next:"next",prevYear:"prev year",nextYear:"next year",today:"today",month:"month",week:"week",day:"day"},buttonIcons:{prev:"left-single-arrow",next:"right-single-arrow",prevYear:"left-double-arrow",nextYear:"right-double-arrow"},theme:!1,themeButtonIcons:{prev:"circle-triangle-w",next:"circle-triangle-e",prevYear:"seek-prev",nextYear:"seek-next"},dragOpacity:.75,dragRevertDuration:500,dragScroll:!0,unselectAuto:!0,dropAccept:"*",eventLimit:!1,eventLimitText:"more",eventLimitClick:"popover",dayPopoverFormat:"LL",handleWindowResize:!0,windowResizeDelay:200},Ct={dayPopoverFormat:"dddd, MMMM D"},Et={header:{left:"next,prev today",center:"",right:"title"},buttonIcons:{prev:"right-single-arrow",next:"left-single-arrow",prevYear:"right-double-arrow",nextYear:"left-double-arrow"},themeButtonIcons:{prev:"circle-triangle-e",next:"circle-triangle-w",nextYear:"seek-prev",prevYear:"seek-next"}},St=t.fullCalendar={version:"2.2.7"},Dt=St.views={};t.fn.fullCalendar=function(e){var n=Array.prototype.slice.call(arguments,1),i=this;return this.each(function(o,s){var r,a=t(s),l=a.data("fullCalendar");"string"==typeof e?l&&t.isFunction(l[e])&&(r=l[e].apply(l,n),o||(i=r),"destroy"===e&&a.removeData("fullCalendar")):l||(l=new mt(a,e),a.data("fullCalendar",l),l.render())}),i};var Tt=St.langs={};St.datepickerLang=function(e,n,i){var o=Tt[e]||(Tt[e]={});o.isRTL=i.isRTL,o.weekNumberTitle=i.weekHeader,t.each(_t,function(t,e){o[t]=e(i)}),t.datepicker&&(t.datepicker.regional[n]=t.datepicker.regional[e]=i,t.datepicker.regional.en=t.datepicker.regional[""],t.datepicker.setDefaults(i))},St.lang=function(e,n){var o,r;o=Tt[e]||(Tt[e]={}),n&&i(o,n),r=s(e),t.each(xt,function(t,e){void 0===o[t]&&(o[t]=e(r,o))}),bt.lang=e};var _t={defaultButtonText:function(t){return{prev:O(t.prevText),next:O(t.nextText),today:O(t.currentText)}},monthYearFormat:function(t){return t.showMonthAfterYear?"YYYY["+t.yearSuffix+"] MMMM":"MMMM YYYY["+t.yearSuffix+"]"}},xt={dayOfMonthFormat:function(t,e){var n=t.longDateFormat("l");return n=n.replace(/^Y+[^\w\s]*|[^\w\s]*Y+$/g,""),e.isRTL?n+=" ddd":n="ddd "+n,n},smallTimeFormat:function(t){return t.longDateFormat("LT").replace(":mm","(:mm)").replace(/(\Wmm)$/,"($1)").replace(/\s*a$/i,"a")},extraSmallTimeFormat:function(t){return t.longDateFormat("LT").replace(":mm","(:mm)").replace(/(\Wmm)$/,"($1)").replace(/\s*a$/i,"t")},noMeridiemTimeFormat:function(t){return t.longDateFormat("LT").replace(/\s*a$/i,"")}};St.lang("en",Ct),St.intersectionToSeg=y,St.applyAll=k,St.debounce=B;var Ht,Rt,kt,Mt=["sun","mon","tue","wed","thu","fri","sat"],It=["year","month","week","day","hour","minute","second","millisecond"],Ot={}.hasOwnProperty,Pt=/^\s*\d{4}-\d\d$/,Ft=/^\s*\d{4}-(?:(\d\d-\d\d)|(W\d\d$)|(W\d\d-\d)|(\d\d\d))((T| )(\d\d(:\d\d(:\d\d(\.\d+)?)?)?)?)?$/,At=e.fn,Bt=t.extend({},At);St.moment=function(){return L(arguments)},St.moment.utc=function(){var t=L(arguments,!0);return t.hasTime()&&t.utc(),t},St.moment.parseZone=function(){return L(arguments,!0,!0)},At.clone=function(){var t=Bt.clone.apply(this,arguments);return z(this,t),this._fullCalendar&&(t._fullCalendar=!0),t},At.time=function(t){if(!this._fullCalendar)return Bt.time.apply(this,arguments);if(null==t)return e.duration({hours:this.hours(),minutes:this.minutes(),seconds:this.seconds(),milliseconds:this.milliseconds()});this._ambigTime=!1,e.isDuration(t)||e.isMoment(t)||(t=e.duration(t));var n=0;return e.isDuration(t)&&(n=24*Math.floor(t.asDays())),this.hours(n+t.hours()).minutes(t.minutes()).seconds(t.seconds()).milliseconds(t.milliseconds())},At.stripTime=function(){var t;return this._ambigTime||(t=this.toArray(),this.utc(),Rt(this,t.slice(0,3)),this._ambigTime=!0,this._ambigZone=!0),this},At.hasTime=function(){return!this._ambigTime},At.stripZone=function(){var t,e;return this._ambigZone||(t=this.toArray(),e=this._ambigTime,this.utc(),Rt(this,t),this._ambigTime=e||!1,this._ambigZone=!0),this},At.hasZone=function(){return!this._ambigZone},At.local=function(){var t=this.toArray(),e=this._ambigZone;return Bt.local.apply(this,arguments),this._ambigTime=!1,this._ambigZone=!1,e&&kt(this,t),this},At.utc=function(){return Bt.utc.apply(this,arguments),this._ambigTime=!1,this._ambigZone=!1,this},t.each(["zone","utcOffset"],function(t,e){Bt[e]&&(At[e]=function(t){return null!=t&&(this._ambigTime=!1,this._ambigZone=!1),Bt[e].apply(this,arguments)})}),At.format=function(){return this._fullCalendar&&arguments[0]?Y(this,arguments[0]):this._ambigTime?G(this,"YYYY-MM-DD"):this._ambigZone?G(this,"YYYY-MM-DD[T]HH:mm:ss"):Bt.format.apply(this,arguments)},At.toISOString=function(){return this._ambigTime?G(this,"YYYY-MM-DD"):this._ambigZone?G(this,"YYYY-MM-DD[T]HH:mm:ss"):Bt.toISOString.apply(this,arguments)},At.isWithin=function(t,e){var n=N([this,t,e]);return n[0]>=n[1]&&n[0]<n[2]},At.isSame=function(t,e){var n;return this._fullCalendar?e?(n=N([this,t],!0),Bt.isSame.call(n[0],n[1],e)):(t=St.moment.parseZone(t),Bt.isSame.call(this,t)&&Boolean(this._ambigTime)===Boolean(t._ambigTime)&&Boolean(this._ambigZone)===Boolean(t._ambigZone)):Bt.isSame.apply(this,arguments)},t.each(["isBefore","isAfter"],function(t,e){At[e]=function(t,n){var i;return this._fullCalendar?(i=N([this,t]),Bt[e].call(i[0],i[1],n)):Bt[e].apply(this,arguments)}}),Ht="_d"in e()&&"updateOffset"in e,Rt=Ht?function(t,n){t._d.setTime(Date.UTC.apply(Date,n)),e.updateOffset(t,!1)}:V,kt=Ht?function(t,n){t._d.setTime(+new Date(n[0]||0,n[1]||0,n[2]||0,n[3]||0,n[4]||0,n[5]||0,n[6]||0)),e.updateOffset(t,!1)}:V;var Lt={t:function(t){return G(t,"a").charAt(0)},T:function(t){return G(t,"A").charAt(0)}};St.formatRange=Z;var Nt={Y:"year",M:"month",D:"day",d:"day",A:"second",a:"second",T:"second",t:"second",H:"second",h:"second",m:"second",s:"second"},zt={};St.Class=Q,Q.extend=function(t){var e,n=this;return t=t||{},H(t,"constructor")&&(e=t.constructor),"function"!=typeof e&&(e=t.constructor=function(){n.apply(this,arguments)}),e.prototype=_(n.prototype),x(t,e.prototype),x(n,e),e},Q.mixin=function(t){x(t.prototype||t,this.prototype)};var Vt=Q.extend({isHidden:!0,options:null,el:null,documentMousedownProxy:null,margin:10,constructor:function(t){this.options=t||{}},show:function(){this.isHidden&&(this.el||this.render(),this.el.show(),this.position(),this.isHidden=!1,this.trigger("show"))},hide:function(){this.isHidden||(this.el.hide(),this.isHidden=!0,this.trigger("hide"))},render:function(){var e=this,n=this.options;this.el=t('<div class="fc-popover"/>').addClass(n.className||"").css({top:0,left:0}).append(n.content).appendTo(n.parentEl),this.el.on("click",".fc-close",function(){e.hide()}),n.autoHide&&t(document).on("mousedown",this.documentMousedownProxy=t.proxy(this,"documentMousedown"))},documentMousedown:function(e){this.el&&!t(e.target).closest(this.el).length&&this.hide()},destroy:function(){this.hide(),this.el&&(this.el.remove(),this.el=null),t(document).off("mousedown",this.documentMousedownProxy)},position:function(){var e,n,i,o,s,r=this.options,a=this.el.offsetParent().offset(),l=this.el.outerWidth(),d=this.el.outerHeight(),c=t(window),u=g(this.el);o=r.top||0,s=void 0!==r.left?r.left:void 0!==r.right?r.right-l:0,u.is(window)||u.is(document)?(u=c,e=0,n=0):(i=u.offset(),e=i.top,n=i.left),e+=c.scrollTop(),n+=c.scrollLeft(),!1!==r.viewportConstrain&&(o=Math.min(o,e+u.outerHeight()-d-this.margin),o=Math.max(o,e+this.margin),s=Math.min(s,n+u.outerWidth()-l-this.margin),s=Math.max(s,n+this.margin)),this.el.css({top:o-a.top,left:s-a.left})},trigger:function(t){this.options[t]&&this.options[t].apply(this,Array.prototype.slice.call(arguments,1))}}),Gt=Q.extend({grid:null,rowCoords:null,colCoords:null,containerEl:null,minX:null,maxX:null,minY:null,maxY:null,constructor:function(t){this.grid=t},build:function(){this.rowCoords=this.grid.computeRowCoords(),this.colCoords=this.grid.computeColCoords(),this.computeBounds()},clear:function(){this.rowCoords=null,this.colCoords=null},getCell:function(t,e){var n,i,o,s=this.rowCoords,r=this.colCoords,a=null,l=null;if(this.inBounds(t,e)){for(n=0;s.length>n;n++)if(i=s[n],e>=i.top&&i.bottom>e){a=n;break}for(n=0;r.length>n;n++)if(i=r[n],t>=i.left&&i.right>t){l=n;break}if(null!==a&&null!==l)return o=this.grid.getCell(a,l),o.grid=this.grid,o}return null},computeBounds:function(){var t;this.containerEl&&(t=this.containerEl.offset(),this.minX=t.left,this.maxX=t.left+this.containerEl.outerWidth(),this.minY=t.top,this.maxY=t.top+this.containerEl.outerHeight())},inBounds:function(t,e){return!this.containerEl||t>=this.minX&&this.maxX>t&&e>=this.minY&&this.maxY>e}}),Yt=Q.extend({coordMaps:null,constructor:function(t){this.coordMaps=t},build:function(){var t,e=this.coordMaps;for(t=0;e.length>t;t++)e[t].build()},getCell:function(t,e){var n,i=this.coordMaps,o=null;for(n=0;i.length>n&&!o;n++)o=i[n].getCell(t,e);return o},clear:function(){var t,e=this.coordMaps;for(t=0;e.length>t;t++)e[t].clear()}}),$t=Q.extend({coordMap:null,options:null,isListening:!1,isDragging:!1,origCell:null,cell:null,mouseX0:null,mouseY0:null,mousemoveProxy:null,
    mouseupProxy:null,scrollEl:null,scrollBounds:null,scrollTopVel:null,scrollLeftVel:null,scrollIntervalId:null,scrollHandlerProxy:null,scrollSensitivity:30,scrollSpeed:200,scrollIntervalMs:50,constructor:function(t,e){this.coordMap=t,this.options=e||{}},mousedown:function(t){v(t)&&(t.preventDefault(),this.startListening(t),this.options.distance||this.startDrag(t))},startListening:function(e){var n,i;this.isListening||(e&&this.options.scroll&&(n=g(t(e.target)),n.is(window)||n.is(document)||(this.scrollEl=n,this.scrollHandlerProxy=B(t.proxy(this,"scrollHandler"),100),this.scrollEl.on("scroll",this.scrollHandlerProxy))),this.computeCoords(),e&&(i=this.getCell(e),this.origCell=i,this.mouseX0=e.pageX,this.mouseY0=e.pageY),t(document).on("mousemove",this.mousemoveProxy=t.proxy(this,"mousemove")).on("mouseup",this.mouseupProxy=t.proxy(this,"mouseup")).on("selectstart",this.preventDefault),this.isListening=!0,this.trigger("listenStart",e))},computeCoords:function(){this.coordMap.build(),this.computeScrollBounds()},mousemove:function(t){var e;this.isDragging||(e=this.options.distance||1,Math.pow(t.pageX-this.mouseX0,2)+Math.pow(t.pageY-this.mouseY0,2)>=e*e&&this.startDrag(t)),this.isDragging&&this.drag(t)},startDrag:function(t){var e;this.isListening||this.startListening(),this.isDragging||(this.isDragging=!0,this.trigger("dragStart",t),(e=this.getCell(t))&&this.cellOver(e))},drag:function(t){var e;this.isDragging&&(e=this.getCell(t),K(e,this.cell)||(this.cell&&this.cellOut(),e&&this.cellOver(e)),this.dragScroll(t))},cellOver:function(t){this.cell=t,this.trigger("cellOver",t,K(t,this.origCell))},cellOut:function(){this.cell&&(this.trigger("cellOut",this.cell),this.cell=null)},mouseup:function(t){this.stopDrag(t),this.stopListening(t)},stopDrag:function(t){this.isDragging&&(this.stopScrolling(),this.trigger("dragStop",t),this.isDragging=!1)},stopListening:function(e){this.isListening&&(this.scrollEl&&(this.scrollEl.off("scroll",this.scrollHandlerProxy),this.scrollHandlerProxy=null),t(document).off("mousemove",this.mousemoveProxy).off("mouseup",this.mouseupProxy).off("selectstart",this.preventDefault),this.mousemoveProxy=null,this.mouseupProxy=null,this.isListening=!1,this.trigger("listenStop",e),this.origCell=this.cell=null,this.coordMap.clear())},getCell:function(t){return this.coordMap.getCell(t.pageX,t.pageY)},trigger:function(t){this.options[t]&&this.options[t].apply(this,Array.prototype.slice.call(arguments,1))},preventDefault:function(t){t.preventDefault()},computeScrollBounds:function(){var t,e=this.scrollEl;e&&(t=e.offset(),this.scrollBounds={top:t.top,left:t.left,bottom:t.top+e.outerHeight(),right:t.left+e.outerWidth()})},dragScroll:function(t){var e,n,i,o,s=this.scrollSensitivity,r=this.scrollBounds,a=0,l=0;r&&(e=(s-(t.pageY-r.top))/s,n=(s-(r.bottom-t.pageY))/s,i=(s-(t.pageX-r.left))/s,o=(s-(r.right-t.pageX))/s,e>=0&&1>=e?a=-1*e*this.scrollSpeed:n>=0&&1>=n&&(a=n*this.scrollSpeed),i>=0&&1>=i?l=-1*i*this.scrollSpeed:o>=0&&1>=o&&(l=o*this.scrollSpeed)),this.setScrollVel(a,l)},setScrollVel:function(e,n){this.scrollTopVel=e,this.scrollLeftVel=n,this.constrainScrollVel(),!this.scrollTopVel&&!this.scrollLeftVel||this.scrollIntervalId||(this.scrollIntervalId=setInterval(t.proxy(this,"scrollIntervalFunc"),this.scrollIntervalMs))},constrainScrollVel:function(){var t=this.scrollEl;0>this.scrollTopVel?0>=t.scrollTop()&&(this.scrollTopVel=0):this.scrollTopVel>0&&t.scrollTop()+t[0].clientHeight>=t[0].scrollHeight&&(this.scrollTopVel=0),0>this.scrollLeftVel?0>=t.scrollLeft()&&(this.scrollLeftVel=0):this.scrollLeftVel>0&&t.scrollLeft()+t[0].clientWidth>=t[0].scrollWidth&&(this.scrollLeftVel=0)},scrollIntervalFunc:function(){var t=this.scrollEl,e=this.scrollIntervalMs/1e3;this.scrollTopVel&&t.scrollTop(t.scrollTop()+this.scrollTopVel*e),this.scrollLeftVel&&t.scrollLeft(t.scrollLeft()+this.scrollLeftVel*e),this.constrainScrollVel(),this.scrollTopVel||this.scrollLeftVel||this.stopScrolling()},stopScrolling:function(){this.scrollIntervalId&&(clearInterval(this.scrollIntervalId),this.scrollIntervalId=null,this.computeCoords())},scrollHandler:function(){this.scrollIntervalId||this.computeCoords()}}),Wt=Q.extend({options:null,sourceEl:null,el:null,parentEl:null,top0:null,left0:null,mouseY0:null,mouseX0:null,topDelta:null,leftDelta:null,mousemoveProxy:null,isFollowing:!1,isHidden:!1,isAnimating:!1,constructor:function(e,n){this.options=n=n||{},this.sourceEl=e,this.parentEl=n.parentEl?t(n.parentEl):e.parent()},start:function(e){this.isFollowing||(this.isFollowing=!0,this.mouseY0=e.pageY,this.mouseX0=e.pageX,this.topDelta=0,this.leftDelta=0,this.isHidden||this.updatePosition(),t(document).on("mousemove",this.mousemoveProxy=t.proxy(this,"mousemove")))},stop:function(e,n){function i(){this.isAnimating=!1,o.destroyEl(),this.top0=this.left0=null,n&&n()}var o=this,s=this.options.revertDuration;this.isFollowing&&!this.isAnimating&&(this.isFollowing=!1,t(document).off("mousemove",this.mousemoveProxy),e&&s&&!this.isHidden?(this.isAnimating=!0,this.el.animate({top:this.top0,left:this.left0},{duration:s,complete:i})):i())},getEl:function(){var t=this.el;return t||(this.sourceEl.width(),t=this.el=this.sourceEl.clone().css({position:"absolute",visibility:"",display:this.isHidden?"none":"",margin:0,right:"auto",bottom:"auto",width:this.sourceEl.width(),height:this.sourceEl.height(),opacity:this.options.opacity||"",zIndex:this.options.zIndex}).appendTo(this.parentEl)),t},destroyEl:function(){this.el&&(this.el.remove(),this.el=null)},updatePosition:function(){var t,e;this.getEl(),null===this.top0&&(this.sourceEl.width(),t=this.sourceEl.offset(),e=this.el.offsetParent().offset(),this.top0=t.top-e.top,this.left0=t.left-e.left),this.el.css({top:this.top0+this.topDelta,left:this.left0+this.leftDelta})},mousemove:function(t){this.topDelta=t.pageY-this.mouseY0,this.leftDelta=t.pageX-this.mouseX0,this.isHidden||this.updatePosition()},hide:function(){this.isHidden||(this.isHidden=!0,this.el&&this.el.hide())},show:function(){this.isHidden&&(this.isHidden=!1,this.updatePosition(),this.getEl().show())}}),Zt=Q.extend({view:null,isRTL:null,cellHtml:"<td/>",constructor:function(t){this.view=t,this.isRTL=t.opt("isRTL")},rowHtml:function(t,e){var n,i,o=this.getHtmlRenderer("cell",t),s="";for(e=e||0,n=0;this.colCnt>n;n++)i=this.getCell(e,n),s+=o(i);return"<tr>"+(s=this.bookendCells(s,t,e))+"</tr>"},bookendCells:function(t,e,n){var i=this.getHtmlRenderer("intro",e)(n||0),o=this.getHtmlRenderer("outro",e)(n||0),s=this.isRTL?o:i,r=this.isRTL?i:o;return"string"==typeof t?s+t+r:t.prepend(s).append(r)},getHtmlRenderer:function(t,e){var n,i,o,s,r=this.view;return n=t+"Html",e&&(i=e+P(t)+"Html"),i&&(s=r[i])?o=r:i&&(s=this[i])?o=this:(s=r[n])?o=r:(s=this[n])&&(o=this),"function"==typeof s?function(){return s.apply(o,arguments)||""}:function(){return s||""}}}),jt=St.Grid=Zt.extend({start:null,end:null,rowCnt:0,colCnt:0,rowData:null,colData:null,el:null,coordMap:null,elsByFill:null,documentDragStartProxy:null,colHeadFormat:null,eventTimeFormat:null,displayEventEnd:null,constructor:function(){Zt.apply(this,arguments),this.coordMap=new Gt(this),this.elsByFill={},this.documentDragStartProxy=t.proxy(this,"documentDragStart")},render:function(){this.bindHandlers()},destroy:function(){this.unbindHandlers()},computeColHeadFormat:function(){},computeEventTimeFormat:function(){return this.view.opt("smallTimeFormat")},computeDisplayEventEnd:function(){return!1},setRange:function(t){var e=this.view;this.start=t.start.clone(),this.end=t.end.clone(),this.rowData=[],this.colData=[],this.updateCells(),this.colHeadFormat=e.opt("columnFormat")||this.computeColHeadFormat(),this.eventTimeFormat=e.opt("timeFormat")||this.computeEventTimeFormat(),this.displayEventEnd=e.opt("displayEventEnd"),null==this.displayEventEnd&&(this.displayEventEnd=this.computeDisplayEventEnd())},updateCells:function(){},rangeToSegs:function(){},getCell:function(e,n){var i;return null==n&&("number"==typeof e?(n=e%this.colCnt,e=Math.floor(e/this.colCnt)):(n=e.col,e=e.row)),i={row:e,col:n},t.extend(i,this.getRowData(e),this.getColData(n)),t.extend(i,this.computeCellRange(i)),i},computeCellRange:function(){},getRowData:function(t){return this.rowData[t]||{}},getColData:function(t){return this.colData[t]||{}},getRowEl:function(){},getColEl:function(){},getCellDayEl:function(t){return this.getColEl(t.col)||this.getRowEl(t.row)},computeRowCoords:function(){var t,e,n,i=[];for(t=0;this.rowCnt>t;t++)e=this.getRowEl(t),n={top:e.offset().top},t>0&&(i[t-1].bottom=n.top),i.push(n);return n.bottom=n.top+e.outerHeight(),i},computeColCoords:function(){var t,e,n,i=[];for(t=0;this.colCnt>t;t++)e=this.getColEl(t),n={left:e.offset().left},t>0&&(i[t-1].right=n.left),i.push(n);return n.right=n.left+e.outerWidth(),i},bindHandlers:function(){var e=this;this.el.on("mousedown",function(n){t(n.target).is(".fc-event-container *, .fc-more")||t(n.target).closest(".fc-popover").length||e.dayMousedown(n)}),this.bindSegHandlers(),t(document).on("dragstart",this.documentDragStartProxy)},unbindHandlers:function(){t(document).off("dragstart",this.documentDragStartProxy)},dayMousedown:function(t){var e,n,i=this,o=this.view,s=o.opt("selectable"),r=new $t(this.coordMap,{scroll:o.opt("dragScroll"),dragStart:function(){o.unselect()},cellOver:function(t,o){var a=r.origCell;a&&(e=o?t:null,s&&(n=i.computeSelection(a,t),n?i.renderSelection(n):l()))},cellOut:function(){e=null,n=null,i.destroySelection(),d()},listenStop:function(t){e&&o.trigger("dayClick",i.getCellDayEl(e),e.start,t),n&&o.reportSelection(n,t),d()}});r.mousedown(t)},renderRangeHelper:function(t,e){var n;n=e?_(e.event):{},n.start=t.start.clone(),n.end=t.end?t.end.clone():null,n.allDay=null,this.view.calendar.normalizeEventDateProps(n),n.className=(n.className||[]).concat("fc-helper"),e||(n.editable=!1),this.renderHelper(n,e)},renderHelper:function(){},destroyHelper:function(){},renderSelection:function(t){this.renderHighlight(t)},destroySelection:function(){this.destroyHighlight()},computeSelection:function(t,e){var n,i=[t.start,t.end,e.start,e.end];return i.sort(F),n={start:i[0].clone(),end:i[3].clone()},this.view.calendar.isSelectionRangeAllowed(n)?n:null},renderHighlight:function(t){this.renderFill("highlight",this.rangeToSegs(t))},destroyHighlight:function(){this.destroyFill("highlight")},highlightSegClasses:function(){return["fc-highlight"]},renderFill:function(){},destroyFill:function(t){var e=this.elsByFill[t];e&&(e.remove(),delete this.elsByFill[t])},renderFillSegEls:function(e,n){var i,o=this,s=this[e+"SegEl"],r="",a=[];if(n.length){for(i=0;n.length>i;i++)r+=this.fillSegHtml(e,n[i]);t(r).each(function(e,i){var r=n[e],l=t(i);s&&(l=s.call(o,r,l)),l&&(l=t(l),l.is(o.fillSegTag)&&(r.el=l,a.push(r)))})}return a},fillSegTag:"div",fillSegHtml:function(t,e){var n=this[t+"SegClasses"],i=this[t+"SegStyles"],o=n?n.call(this,e):[],s=i?i.call(this,e):"";return"<"+this.fillSegTag+(o.length?' class="'+o.join(" ")+'"':"")+(s?' style="'+s+'"':"")+" />"},headHtml:function(){return'<div class="fc-row '+this.view.widgetHeaderClass+'"><table><thead>'+this.rowHtml("head")+"</thead></table></div>"},headCellHtml:function(t){var e=this.view,n=t.start;return'<th class="fc-day-header '+e.widgetHeaderClass+" fc-"+Mt[n.day()]+'">'+I(n.format(this.colHeadFormat))+"</th>"},bgCellHtml:function(t){var e=this.view,n=t.start,i=this.getDayClasses(n);return i.unshift("fc-day",e.widgetContentClass),'<td class="'+i.join(" ")+'" data-date="'+n.format("YYYY-MM-DD")+'"></td>'},getDayClasses:function(t){var e=this.view,n=e.calendar.getNow().stripTime(),i=["fc-"+Mt[t.day()]];return"month"===e.name&&t.month()!=e.intervalStart.month()&&i.push("fc-other-month"),t.isSame(n,"day")?i.push("fc-today",e.highlightStateClass):n>t?i.push("fc-past"):i.push("fc-future"),i}});jt.mixin({mousedOverSeg:null,isDraggingSeg:!1,isResizingSeg:!1,segs:null,renderEvents:function(t){var e,n,i=this.eventsToSegs(t),o=[],s=[];for(e=0;i.length>e;e++)n=i[e],J(n.event)?o.push(n):s.push(n);o=this.renderBgSegs(o)||o,s=this.renderFgSegs(s)||s,this.segs=o.concat(s)},destroyEvents:function(){this.triggerSegMouseout(),this.destroyFgSegs(),this.destroyBgSegs(),this.segs=null},getEventSegs:function(){return this.segs||[]},renderFgSegs:function(){},destroyFgSegs:function(){},renderFgSegEls:function(e,n){var i,o=this.view,s="",r=[];if(e.length){for(i=0;e.length>i;i++)s+=this.fgSegHtml(e[i],n);t(s).each(function(n,i){var s=e[n],a=o.resolveEventEl(s.event,t(i));a&&(a.data("fc-seg",s),s.el=a,r.push(s))})}return r},fgSegHtml:function(){},renderBgSegs:function(t){return this.renderFill("bgEvent",t)},destroyBgSegs:function(){this.destroyFill("bgEvent")},bgEventSegEl:function(t,e){return this.view.resolveEventEl(t.event,e)},bgEventSegClasses:function(t){var e=t.event,n=e.source||{};return["fc-bgevent"].concat(e.className,n.className||[])},bgEventSegStyles:function(t){var e=this.view,n=t.event,i=n.source||{},o=n.color,s=i.color,r=e.opt("eventColor"),a=n.backgroundColor||o||i.backgroundColor||s||e.opt("eventBackgroundColor")||r;return a?"background-color:"+a:""},businessHoursSegClasses:function(){return["fc-nonbusiness","fc-bgevent"]},bindSegHandlers:function(){var e=this,n=this.view;t.each({mouseenter:function(t,n){e.triggerSegMouseover(t,n)},mouseleave:function(t,n){e.triggerSegMouseout(t,n)},click:function(t,e){return n.trigger("eventClick",this,t.event,e)},mousedown:function(i,o){t(o.target).is(".fc-resizer")&&n.isEventResizable(i.event)?e.segResizeMousedown(i,o):n.isEventDraggable(i.event)&&e.segDragMousedown(i,o)}},function(n,i){e.el.on(n,".fc-event-container > *",function(n){var o=t(this).data("fc-seg");return!o||e.isDraggingSeg||e.isResizingSeg?void 0:i.call(this,o,n)})})},triggerSegMouseover:function(t,e){this.mousedOverSeg||(this.mousedOverSeg=t,this.view.trigger("eventMouseover",t.el[0],t.event,e))},triggerSegMouseout:function(t,e){e=e||{},this.mousedOverSeg&&(t=t||this.mousedOverSeg,this.mousedOverSeg=null,this.view.trigger("eventMouseout",t.el[0],t.event,e))},segDragMousedown:function(t,e){var n,i=this,o=this.view,s=t.el,r=t.event,a=new Wt(t.el,{parentEl:o.el,opacity:o.opt("dragOpacity"),revertDuration:o.opt("dragRevertDuration"),zIndex:2}),c=new $t(o.coordMap,{distance:5,scroll:o.opt("dragScroll"),listenStart:function(t){a.hide(),a.start(t)},dragStart:function(e){i.triggerSegMouseout(t,e),i.isDraggingSeg=!0,o.hideEvent(r),o.trigger("eventDragStart",s[0],r,e,{})},cellOver:function(e,s){var d=t.cell||c.origCell;n=i.computeEventDrop(d,e,r),n?(o.renderDrag(n,t)?a.hide():a.show(),s&&(n=null)):(a.show(),l())},cellOut:function(){n=null,o.destroyDrag(),a.show(),d()},dragStop:function(t){a.stop(!n,function(){i.isDraggingSeg=!1,o.destroyDrag(),o.showEvent(r),o.trigger("eventDragStop",s[0],r,t,{}),n&&o.reportEventDrop(r,n,s,t)}),d()},listenStop:function(){a.stop()}});c.mousedown(e)},computeEventDrop:function(t,e,n){var i,o,s,r,a,l=t.start,d=e.start;return l.hasTime()===d.hasTime()?(i=b(d,l),o=n.start.clone().add(i),s=null===n.end?null:n.end.clone().add(i),r=n.allDay):(o=d.clone(),s=null,r=!d.hasTime()),a={start:o,end:s,allDay:r},this.view.calendar.isEventRangeAllowed(a,n)?a:null},documentDragStart:function(e,n){var i,o,s=this.view;s.opt("droppable")&&(i=t(e.target),o=s.opt("dropAccept"),(t.isFunction(o)?o.call(i[0],i):i.is(o))&&this.startExternalDrag(i,e,n))},startExternalDrag:function(e,n){var i,o,s=this,r=st(e);i=new $t(this.coordMap,{cellOver:function(t){o=s.computeExternalDrop(t,r),o?s.renderDrag(o):l()},cellOut:function(){o=null,s.destroyDrag(),d()}}),t(document).one("dragstop",function(t,n){s.destroyDrag(),d(),o&&s.view.reportExternalDrop(r,o,e,t,n)}),i.startDrag(n)},computeExternalDrop:function(t,e){var n={start:t.start.clone(),end:null};return e.startTime&&!n.start.hasTime()&&n.start.time(e.startTime),e.duration&&(n.end=n.start.clone().add(e.duration)),this.view.calendar.isExternalDropRangeAllowed(n,e.eventProps)?n:null},renderDrag:function(){},destroyDrag:function(){},segResizeMousedown:function(t,e){function n(){s.destroyEventResize(),r.showEvent(u),d()}var i,o,s=this,r=this.view,a=r.calendar,c=t.el,u=t.event,h=u.start,f=a.getEventEnd(u);o=new $t(this.coordMap,{distance:5,scroll:r.opt("dragScroll"),dragStart:function(e){s.triggerSegMouseout(t,e),s.isResizingSeg=!0,r.trigger("eventResizeStart",c[0],u,e,{})},cellOver:function(e){i=e.end,i.isAfter(h)||(i=h.clone().add(b(e.end,e.start))),i.isSame(f)?i=null:a.isEventRangeAllowed({start:h,end:i},u)?(s.renderEventResize({start:h,end:i},t),r.hideEvent(u)):(i=null,l())},cellOut:function(){i=null,n()},dragStop:function(t){s.isResizingSeg=!1,n(),r.trigger("eventResizeStop",c[0],u,t,{}),i&&r.reportEventResize(u,i,c,t)}}),o.mousedown(e)},renderEventResize:function(){},destroyEventResize:function(){},getEventTimeText:function(t,e){return e=e||this.eventTimeFormat,t.end&&this.displayEventEnd?this.view.formatRange(t,e):t.start.format(e)},getSegClasses:function(t,e,n){var i=t.event,o=["fc-event",t.isStart?"fc-start":"fc-not-start",t.isEnd?"fc-end":"fc-not-end"].concat(i.className,i.source?i.source.className:[]);return e&&o.push("fc-draggable"),n&&o.push("fc-resizable"),o},getEventSkinCss:function(t){var e=this.view,n=t.source||{},i=t.color,o=n.color,s=e.opt("eventColor"),r=t.backgroundColor||i||n.backgroundColor||o||e.opt("eventBackgroundColor")||s,a=t.borderColor||i||n.borderColor||o||e.opt("eventBorderColor")||s,l=t.textColor||n.textColor||e.opt("eventTextColor"),d=[];return r&&d.push("background-color:"+r),a&&d.push("border-color:"+a),l&&d.push("color:"+l),d.join(";")},eventsToSegs:function(t,e){var n,i=this.eventsToRanges(t),o=[];for(n=0;i.length>n;n++)o.push.apply(o,this.eventRangeToSegs(i[n],e));return o},eventsToRanges:function(e){var n=this,i=nt(e),o=[];return t.each(i,function(t,e){e.length&&o.push.apply(o,tt(e[0])?n.eventsToInverseRanges(e):n.eventsToNormalRanges(e))}),o},eventsToNormalRanges:function(t){var e,n,i,o,s=this.view.calendar,r=[];for(e=0;t.length>e;e++)n=t[e],i=n.start.clone().stripZone(),o=s.getEventEnd(n).stripZone(),r.push({event:n,start:i,end:o,eventStartMS:+i,eventDurationMS:o-i});return r},eventsToInverseRanges:function(t){var e,n,i=this.view,o=i.start.clone().stripZone(),s=i.end.clone().stripZone(),r=this.eventsToNormalRanges(t),a=[],l=t[0],d=o;for(r.sort(it),e=0;r.length>e;e++)n=r[e],n.start>d&&a.push({event:l,start:d,end:n.start}),d=n.end;return s>d&&a.push({event:l,start:d,end:s}),a},eventRangeToSegs:function(t,e){var n,i,o;for(n=e?e(t):this.rangeToSegs(t),i=0;n.length>i;i++)o=n[i],o.event=t.event,o.eventStartMS=t.eventStartMS,o.eventDurationMS=t.eventDurationMS;return n}}),St.compareSegs=ot,St.dataAttrPrefix="";var Xt=jt.extend({numbersVisible:!1,bottomCoordPadding:0,breakOnWeeks:null,cellDates:null,dayToCellOffsets:null,rowEls:null,dayEls:null,helperEls:null,render:function(t){var e,n,i,o=this.view,s=this.rowCnt,r=this.colCnt,a=s*r,l="";for(e=0;s>e;e++)l+=this.dayRowHtml(e,t);for(this.el.html(l),this.rowEls=this.el.find(".fc-row"),this.dayEls=this.el.find(".fc-day"),n=0;a>n;n++)i=this.getCell(n),o.trigger("dayRender",null,i.start,this.dayEls.eq(n));jt.prototype.render.call(this)},destroy:function(){this.destroySegPopover(),jt.prototype.destroy.call(this)},dayRowHtml:function(t,e){var n=this.view,i=["fc-row","fc-week",n.widgetContentClass];return e&&i.push("fc-rigid"),'<div class="'+i.join(" ")+'"><div class="fc-bg"><table>'+this.rowHtml("day",t)+'</table></div><div class="fc-content-skeleton"><table>'+(this.numbersVisible?"<thead>"+this.rowHtml("number",t)+"</thead>":"")+"</table></div></div>"},dayCellHtml:function(t){return this.bgCellHtml(t)},computeColHeadFormat:function(){return this.rowCnt>1?"ddd":this.colCnt>1?this.view.opt("dayOfMonthFormat"):"dddd"},computeEventTimeFormat:function(){return this.view.opt("extraSmallTimeFormat")},computeDisplayEventEnd:function(){return 1==this.colCnt},updateCells:function(){var t,e,n,i;if(this.updateCellDates(),t=this.cellDates,this.breakOnWeeks){for(e=t[0].day(),i=1;t.length>i&&t[i].day()!=e;i++);n=Math.ceil(t.length/i)}else n=1,i=t.length;this.rowCnt=n,this.colCnt=i},updateCellDates:function(){for(var t=this.view,e=this.start.clone(),n=[],i=-1,o=[];e.isBefore(this.end);)t.isHiddenDay(e)?o.push(i+.5):(i++,o.push(i),n.push(e.clone())),e.add(1,"days");this.cellDates=n,this.dayToCellOffsets=o},computeCellRange:function(t){var e=this.colCnt,n=t.row*e+(this.isRTL?e-t.col-1:t.col),i=this.cellDates[n].clone();return{start:i,end:i.clone().add(1,"day")}},getRowEl:function(t){return this.rowEls.eq(t)},getColEl:function(t){return this.dayEls.eq(t)},getCellDayEl:function(t){return this.dayEls.eq(t.row*this.colCnt+t.col)},computeRowCoords:function(){var t=jt.prototype.computeRowCoords.call(this);return t[t.length-1].bottom+=this.bottomCoordPadding,t},rangeToSegs:function(t){var e,n,i,o,s,r,a,l,d,c,u=this.isRTL,h=this.rowCnt,f=this.colCnt,p=[];for(t=this.view.computeDayRange(t),e=this.dateToCellOffset(t.start),n=this.dateToCellOffset(t.end.subtract(1,"days")),i=0;h>i;i++)o=i*f,s=o+f-1,l=Math.max(o,e),d=Math.min(s,n),l=Math.ceil(l),(d=Math.floor(d))>=l&&(r=l===e,a=d===n,l-=o,d-=o,c={row:i,isStart:r,isEnd:a},u?(c.leftCol=f-d-1,c.rightCol=f-l-1):(c.leftCol=l,c.rightCol=d),p.push(c));return p},dateToCellOffset:function(t){var e=this.dayToCellOffsets,n=t.diff(this.start,"days");return 0>n?e[0]-1:n>=e.length?e[e.length-1]+1:e[n]},renderDrag:function(t,e){var n;return this.renderHighlight(this.view.calendar.ensureVisibleEventRange(t)),e&&!e.el.closest(this.el).length?(this.renderRangeHelper(t,e),n=this.view.opt("dragOpacity"),void 0!==n&&this.helperEls.css("opacity",n),!0):void 0},destroyDrag:function(){this.destroyHighlight(),this.destroyHelper()},renderEventResize:function(t,e){this.renderHighlight(t),this.renderRangeHelper(t,e)},destroyEventResize:function(){this.destroyHighlight(),this.destroyHelper()},renderHelper:function(e,n){var i,o=[],s=this.eventsToSegs([e]);s=this.renderFgSegEls(s),i=this.renderSegRows(s),this.rowEls.each(function(e,s){var r,a=t(s),l=t('<div class="fc-helper-skeleton"><table/></div>');r=n&&n.row===e?n.el.position().top:a.find(".fc-content-skeleton tbody").position().top,l.css("top",r).find("table").append(i[e].tbodyEl),a.append(l),o.push(l[0])}),this.helperEls=t(o)},destroyHelper:function(){this.helperEls&&(this.helperEls.remove(),this.helperEls=null)},fillSegTag:"td",renderFill:function(e,n){var i,o,s,r=[];for(n=this.renderFillSegEls(e,n),i=0;n.length>i;i++)o=n[i],s=this.renderFillRow(e,o),this.rowEls.eq(o.row).append(s),r.push(s[0]);return this.elsByFill[e]=t(r),n},renderFillRow:function(e,n){var i,o,s=this.colCnt,r=n.leftCol,a=n.rightCol+1;return i=t('<div class="fc-'+e.toLowerCase()+'-skeleton"><table><tr/></table></div>'),o=i.find("tr"),r>0&&o.append('<td colspan="'+r+'"/>'),o.append(n.el.attr("colspan",a-r)),s>a&&o.append('<td colspan="'+(s-a)+'"/>'),this.bookendCells(o,e),i}});Xt.mixin({rowStructs:null,destroyEvents:function(){this.destroySegPopover(),jt.prototype.destroyEvents.apply(this,arguments)},getEventSegs:function(){return jt.prototype.getEventSegs.call(this).concat(this.popoverSegs||[])},renderBgSegs:function(e){var n=t.grep(e,function(t){return t.event.allDay});return jt.prototype.renderBgSegs.call(this,n)},renderFgSegs:function(e){var n;return e=this.renderFgSegEls(e),n=this.rowStructs=this.renderSegRows(e),this.rowEls.each(function(e,i){t(i).find(".fc-content-skeleton > table").append(n[e].tbodyEl)}),e},destroyFgSegs:function(){for(var t,e=this.rowStructs||[];t=e.pop();)t.tbodyEl.remove();this.rowStructs=null},renderSegRows:function(t){var e,n,i=[];for(e=this.groupSegRows(t),n=0;e.length>n;n++)i.push(this.renderSegRow(n,e[n]));return i},fgSegHtml:function(t,e){var n,i=this.view,o=t.event,s=i.isEventDraggable(o),r=!e&&o.allDay&&t.isEnd&&i.isEventResizable(o),a=this.getSegClasses(t,s,r),l=this.getEventSkinCss(o),d="";return a.unshift("fc-day-grid-event"),!o.allDay&&t.isStart&&(d='<span class="fc-time">'+I(this.getEventTimeText(o))+"</span>"),n='<span class="fc-title">'+(I(o.title||"")||"&nbsp;")+"</span>",'<a class="'+a.join(" ")+'"'+(o.url?' href="'+I(o.url)+'"':"")+(l?' style="'+l+'"':"")+'><div class="fc-content">'+(this.isRTL?n+" "+d:d+" "+n)+"</div>"+(r?'<div class="fc-resizer"/>':"")+"</a>"},renderSegRow:function(e,n){function i(e){for(;e>r;)c=(v[o-1]||[])[r],c?c.attr("rowspan",parseInt(c.attr("rowspan")||1,10)+1):(c=t("<td/>"),a.append(c)),m[o][r]=c,v[o][r]=c,r++}var o,s,r,a,l,d,c,u=this.colCnt,h=this.buildSegLevels(n),f=Math.max(1,h.length),p=t("<tbody/>"),g=[],m=[],v=[];for(o=0;f>o;o++){if(s=h[o],r=0,a=t("<tr/>"),g.push([]),m.push([]),v.push([]),s)for(l=0;s.length>l;l++){for(d=s[l],i(d.leftCol),c=t('<td class="fc-event-container"/>').append(d.el),d.leftCol!=d.rightCol?c.attr("colspan",d.rightCol-d.leftCol+1):v[o][r]=c;d.rightCol>=r;)m[o][r]=c,g[o][r]=d,r++;a.append(c)}i(u),this.bookendCells(a,"eventSkeleton"),p.append(a)}return{row:e,tbodyEl:p,cellMatrix:m,segMatrix:g,segLevels:h,segs:n}},buildSegLevels:function(t){var e,n,i,o=[];for(t.sort(ot),e=0;t.length>e;e++){for(n=t[e],i=0;o.length>i&&rt(n,o[i]);i++);n.level=i,(o[i]||(o[i]=[])).push(n)}for(i=0;o.length>i;i++)o[i].sort(at);return o},groupSegRows:function(t){var e,n=[];for(e=0;this.rowCnt>e;e++)n.push([]);for(e=0;t.length>e;e++)n[t[e].row].push(t[e]);return n}}),Xt.mixin({segPopover:null,popoverSegs:null,destroySegPopover:function(){this.segPopover&&this.segPopover.hide()},limitRows:function(t){var e,n,i=this.rowStructs||[];for(e=0;i.length>e;e++)this.unlimitRow(e),!1!==(n=!!t&&("number"==typeof t?t:this.computeRowLevelLimit(e)))&&this.limitRow(e,n)},computeRowLevelLimit:function(t){var e,n,i=this.rowEls.eq(t),o=i.height(),s=this.rowStructs[t].tbodyEl.children();for(e=0;s.length>e;e++)if(n=s.eq(e).removeClass("fc-limited"),n.position().top+n.outerHeight()>o)return e;return!1},limitRow:function(e,n){function i(i){for(;i>S;)o=b.getCell(e,S),c=b.getCellSegs(o,n),c.length&&(f=r[n-1][S],w=b.renderMoreLink(o,c),y=t("<div/>").append(w),f.append(y),E.push(y[0])),S++}var o,s,r,a,l,d,c,u,h,f,p,g,m,v,y,w,b=this,C=this.rowStructs[e],E=[],S=0;if(n&&C.segLevels.length>n){for(s=C.segLevels[n-1],r=C.cellMatrix,a=C.tbodyEl.children().slice(n).addClass("fc-limited").get(),l=0;s.length>l;l++){for(d=s[l],i(d.leftCol),h=[],u=0;d.rightCol>=S;)o=this.getCell(e,S),c=this.getCellSegs(o,n),h.push(c),u+=c.length,S++;if(u){for(f=r[n-1][d.leftCol],p=f.attr("rowspan")||1,g=[],m=0;h.length>m;m++)v=t('<td class="fc-more-cell"/>').attr("rowspan",p),c=h[m],o=this.getCell(e,d.leftCol+m),w=this.renderMoreLink(o,[d].concat(c)),y=t("<div/>").append(w),v.append(y),g.push(v[0]),E.push(v[0]);f.addClass("fc-limited").after(t(g)),a.push(f[0])}}i(this.colCnt),C.moreEls=t(E),C.limitedEls=t(a)}},unlimitRow:function(t){var e=this.rowStructs[t];e.moreEls&&(e.moreEls.remove(),e.moreEls=null),e.limitedEls&&(e.limitedEls.removeClass("fc-limited"),e.limitedEls=null)},renderMoreLink:function(e,n){var i=this,o=this.view;return t('<a class="fc-more"/>').text(this.getMoreLinkText(n.length)).on("click",function(s){var r=o.opt("eventLimitClick"),a=e.start,l=t(this),d=i.getCellDayEl(e),c=i.getCellSegs(e),u=i.resliceDaySegs(c,a),h=i.resliceDaySegs(n,a);"function"==typeof r&&(r=o.trigger("eventLimitClick",null,{date:a,dayEl:d,moreEl:l,segs:u,hiddenSegs:h},s)),"popover"===r?i.showSegPopover(e,l,u):"string"==typeof r&&o.calendar.zoomTo(a,r)})},showSegPopover:function(t,e,n){var i,o,s=this,r=this.view,a=e.parent();i=1==this.rowCnt?r.el:this.rowEls.eq(t.row),o={className:"fc-more-popover",content:this.renderSegPopoverContent(t,n),parentEl:this.el,top:i.offset().top,autoHide:!0,viewportConstrain:r.opt("popoverViewportConstrain"),hide:function(){s.segPopover.destroy(),s.segPopover=null,s.popoverSegs=null}},this.isRTL?o.right=a.offset().left+a.outerWidth()+1:o.left=a.offset().left-1,this.segPopover=new Vt(o),this.segPopover.show()},renderSegPopoverContent:function(e,n){var i,o=this.view,s=o.opt("theme"),r=e.start.format(o.opt("dayPopoverFormat")),a=t('<div class="fc-header '+o.widgetHeaderClass+'"><span class="fc-close '+(s?"ui-icon ui-icon-closethick":"fc-icon fc-icon-x")+'"></span><span class="fc-title">'+I(r)+'</span><div class="fc-clear"/></div><div class="fc-body '+o.widgetContentClass+'"><div class="fc-event-container"></div></div>'),l=a.find(".fc-event-container");for(n=this.renderFgSegEls(n,!0),this.popoverSegs=n,i=0;n.length>i;i++)n[i].cell=e,l.append(n[i].el);return a},resliceDaySegs:function(e,n){var i=t.map(e,function(t){return t.event}),o=n.clone().stripTime(),s=o.clone().add(1,"days"),r={start:o,end:s};return this.eventsToSegs(i,function(t){var e=y(t,r);return e?[e]:[]})},getMoreLinkText:function(t){var e=this.view.opt("eventLimitText");return"function"==typeof e?e(t):"+"+t+" "+e},getCellSegs:function(t,e){for(var n,i=this.rowStructs[t.row].segMatrix,o=e||0,s=[];i.length>o;)n=i[o][t.col],n&&s.push(n),o++;return s}});var qt=jt.extend({slotDuration:null,snapDuration:null,minTime:null,maxTime:null,axisFormat:null,dayEls:null,slatEls:null,slatTops:null,helperEl:null,businessHourSegs:null,constructor:function(){jt.apply(this,arguments),this.processOptions()},render:function(){this.el.html(this.renderHtml()),this.dayEls=this.el.find(".fc-day"),this.slatEls=this.el.find(".fc-slats tr"),this.computeSlatTops(),this.renderBusinessHours(),jt.prototype.render.call(this)},renderBusinessHours:function(){var t=this.view.calendar.getBusinessHoursEvents();this.businessHourSegs=this.renderFill("businessHours",this.eventsToSegs(t),"bgevent")},renderHtml:function(){return'<div class="fc-bg"><table>'+this.rowHtml("slotBg")+'</table></div><div class="fc-slats"><table>'+this.slatRowHtml()+"</table></div>"},slotBgCellHtml:function(t){return this.bgCellHtml(t)},slatRowHtml:function(){for(var t,n,i,o=this.view,s=this.isRTL,r="",a=0==this.slotDuration.asMinutes()%15,l=e.duration(+this.minTime);this.maxTime>l;)t=this.start.clone().time(l),n=t.minutes(),i='<td class="fc-axis fc-time '+o.widgetContentClass+'" '+o.axisStyleAttr()+">"+(a&&n?"":"<span>"+I(t.format(this.axisFormat))+"</span>")+"</td>",r+="<tr "+(n?'class="fc-minor"':"")+">"+(s?"":i)+'<td class="'+o.widgetContentClass+'"/>'+(s?i:"")+"</tr>",l.add(this.slotDuration);return r},processOptions:function(){var t=this.view,n=t.opt("slotDuration"),i=t.opt("snapDuration");n=e.duration(n),i=i?e.duration(i):n,this.slotDuration=n,this.snapDuration=i,this.minTime=e.duration(t.opt("minTime")),this.maxTime=e.duration(t.opt("maxTime")),this.axisFormat=t.opt("axisFormat")||t.opt("smallTimeFormat")},computeColHeadFormat:function(){return this.colCnt>1?this.view.opt("dayOfMonthFormat"):"dddd"},computeEventTimeFormat:function(){return this.view.opt("noMeridiemTimeFormat")},computeDisplayEventEnd:function(){return!0},updateCells:function(){var t,e=this.view,n=[];for(t=this.start.clone();t.isBefore(this.end);)n.push({day:t.clone()}),t.add(1,"day"),t=e.skipHiddenDays(t);this.isRTL&&n.reverse(),this.colData=n,this.colCnt=n.length,this.rowCnt=Math.ceil((this.maxTime-this.minTime)/this.snapDuration)},computeCellRange:function(t){var e=this.computeSnapTime(t.row),n=this.view.calendar.rezoneDate(t.day).time(e);return{start:n,end:n.clone().add(this.snapDuration)}},getColEl:function(t){return this.dayEls.eq(t)},computeSnapTime:function(t){return e.duration(this.minTime+this.snapDuration*t)},rangeToSegs:function(t){var e,n,i,o,s=this.colCnt,r=[];for(t={start:t.start.clone().stripZone(),end:t.end.clone().stripZone()},n=0;s>n;n++)i=this.colData[n].day,o={start:i.clone().time(this.minTime),end:i.clone().time(this.maxTime)},(e=y(t,o))&&(e.col=n,r.push(e));return r},resize:function(){this.computeSlatTops(),this.updateSegVerticals()},computeRowCoords:function(){var t,e,n=this.el.offset().top,i=[];for(t=0;this.rowCnt>t;t++)e={top:n+this.computeTimeTop(this.computeSnapTime(t))},t>0&&(i[t-1].bottom=e.top),i.push(e);return e.bottom=e.top+this.computeTimeTop(this.computeSnapTime(t)),i},computeDateTop:function(t,n){return this.computeTimeTop(e.duration(t.clone().stripZone()-n.clone().stripTime()))},computeTimeTop:function(t){var e,n,i,o,s=(t-this.minTime)/this.slotDuration;return s=Math.max(0,s),s=Math.min(this.slatEls.length,s),e=Math.floor(s),n=s-e,i=this.slatTops[e],n?(o=this.slatTops[e+1],i+(o-i)*n):i},computeSlatTops:function(){var e,n=[];this.slatEls.each(function(i,o){e=t(o).position().top,n.push(e)}),n.push(e+this.slatEls.last().outerHeight()),this.slatTops=n},renderDrag:function(t,e){var n;return e?(this.renderRangeHelper(t,e),n=this.view.opt("dragOpacity"),void 0!==n&&this.helperEl.css("opacity",n),!0):void this.renderHighlight(this.view.calendar.ensureVisibleEventRange(t))},destroyDrag:function(){this.destroyHelper(),this.destroyHighlight()},renderEventResize:function(t,e){this.renderRangeHelper(t,e)},destroyEventResize:function(){this.destroyHelper()},renderHelper:function(e,n){var i,o,s,r,a=this.eventsToSegs([e]);for(a=this.renderFgSegEls(a),
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                   i=this.renderSegTable(a),o=0;a.length>o;o++)s=a[o],n&&n.col===s.col&&(r=n.el,s.el.css({left:r.css("left"),right:r.css("right"),"margin-left":r.css("margin-left"),"margin-right":r.css("margin-right")}));this.helperEl=t('<div class="fc-helper-skeleton"/>').append(i).appendTo(this.el)},destroyHelper:function(){this.helperEl&&(this.helperEl.remove(),this.helperEl=null)},renderSelection:function(t){this.view.opt("selectHelper")?this.renderRangeHelper(t):this.renderHighlight(t)},destroySelection:function(){this.destroyHelper(),this.destroyHighlight()},renderFill:function(e,n,i){var o,s,r,a,l,d,c,u,h,f;if(n.length){for(n=this.renderFillSegEls(e,n),o=this.groupSegCols(n),i=i||e.toLowerCase(),s=t('<div class="fc-'+i+'-skeleton"><table><tr/></table></div>'),r=s.find("tr"),a=0;o.length>a;a++)if(l=o[a],d=t("<td/>").appendTo(r),l.length)for(c=t('<div class="fc-'+i+'-container"/>').appendTo(d),u=this.colData[a].day,h=0;l.length>h;h++)f=l[h],c.append(f.el.css({top:this.computeDateTop(f.start,u),bottom:-this.computeDateTop(f.end,u)}));this.bookendCells(r,e),this.el.append(s),this.elsByFill[e]=s}return n}});qt.mixin({eventSkeletonEl:null,renderFgSegs:function(e){return e=this.renderFgSegEls(e),this.el.append(this.eventSkeletonEl=t('<div class="fc-content-skeleton"/>').append(this.renderSegTable(e))),e},destroyFgSegs:function(){this.eventSkeletonEl&&(this.eventSkeletonEl.remove(),this.eventSkeletonEl=null)},renderSegTable:function(e){var n,i,o,s,r,a,l=t("<table><tr/></table>"),d=l.find("tr");for(n=this.groupSegCols(e),this.computeSegVerticals(e),s=0;n.length>s;s++){for(r=n[s],lt(r),a=t('<div class="fc-event-container"/>'),i=0;r.length>i;i++)o=r[i],o.el.css(this.generateSegPositionCss(o)),30>o.bottom-o.top&&o.el.addClass("fc-short"),a.append(o.el);d.append(t("<td/>").append(a))}return this.bookendCells(d,"eventSkeleton"),l},updateSegVerticals:function(){var t,e=(this.segs||[]).concat(this.businessHourSegs||[]);for(this.computeSegVerticals(e),t=0;e.length>t;t++)e[t].el.css(this.generateSegVerticalCss(e[t]))},computeSegVerticals:function(t){var e,n;for(e=0;t.length>e;e++)n=t[e],n.top=this.computeDateTop(n.start,n.start),n.bottom=this.computeDateTop(n.end,n.start)},fgSegHtml:function(t,e){var n,i,o,s=this.view,r=t.event,a=s.isEventDraggable(r),l=!e&&t.isEnd&&s.isEventResizable(r),d=this.getSegClasses(t,a,l),c=this.getEventSkinCss(r);return d.unshift("fc-time-grid-event"),s.isMultiDayEvent(r)?(t.isStart||t.isEnd)&&(n=this.getEventTimeText(t),i=this.getEventTimeText(t,"LT"),o=this.getEventTimeText({start:t.start})):(n=this.getEventTimeText(r),i=this.getEventTimeText(r,"LT"),o=this.getEventTimeText({start:r.start})),'<a class="'+d.join(" ")+'"'+(r.url?' href="'+I(r.url)+'"':"")+(c?' style="'+c+'"':"")+'><div class="fc-content">'+(n?'<div class="fc-time" data-start="'+I(o)+'" data-full="'+I(i)+'"><span>'+I(n)+"</span></div>":"")+(r.title?'<div class="fc-title">'+I(r.title)+"</div>":"")+'</div><div class="fc-bg"/>'+(l?'<div class="fc-resizer"/>':"")+"</a>"},generateSegPositionCss:function(t){var e,n,i=this.view.opt("slotEventOverlap"),o=t.backwardCoord,s=t.forwardCoord,r=this.generateSegVerticalCss(t);return i&&(s=Math.min(1,o+2*(s-o))),this.isRTL?(e=1-s,n=o):(e=o,n=1-s),r.zIndex=t.level+1,r.left=100*e+"%",r.right=100*n+"%",i&&t.forwardPressure&&(r[this.isRTL?"marginLeft":"marginRight"]=20),r},generateSegVerticalCss:function(t){return{top:t.top,bottom:-t.bottom}},groupSegCols:function(t){var e,n=[];for(e=0;this.colCnt>e;e++)n.push([]);for(e=0;t.length>e;e++)n[t[e].col].push(t[e]);return n}});var Ut=St.View=Q.extend({type:null,name:null,title:null,calendar:null,options:null,coordMap:null,el:null,start:null,end:null,intervalStart:null,intervalEnd:null,intervalDuration:null,intervalUnit:null,isSelected:!1,scrollerEl:null,scrollTop:null,widgetHeaderClass:null,widgetContentClass:null,highlightStateClass:null,nextDayThreshold:null,isHiddenDayHash:null,documentMousedownProxy:null,constructor:function(n,i,o){this.calendar=n,this.options=i,this.type=this.name=o,this.nextDayThreshold=e.duration(this.opt("nextDayThreshold")),this.initTheming(),this.initHiddenDays(),this.documentMousedownProxy=t.proxy(this,"documentMousedown"),this.initialize()},initialize:function(){},opt:function(e){var n;return n=this.options[e],void 0!==n?n:(n=this.calendar.options[e],t.isPlainObject(n)&&!o(e)?w(n,this.type):n)},trigger:function(t,e){var n=this.calendar;return n.trigger.apply(n,[t,e||this].concat(Array.prototype.slice.call(arguments,2),[this]))},setDate:function(t){this.setRange(this.computeRange(t))},setRange:function(e){t.extend(this,e),this.updateTitle()},computeRange:function(t){var n,i,o=e.duration(this.opt("duration")||this.constructor.duration||{days:1}),s=E(o),r=t.clone().startOf(s),a=r.clone().add(o);return/year|month|week|day/.test(s)?(r.stripTime(),a.stripTime()):(r.hasTime()||(r=this.calendar.rezoneDate(r)),a.hasTime()||(a=this.calendar.rezoneDate(a))),n=r.clone(),n=this.skipHiddenDays(n),i=a.clone(),i=this.skipHiddenDays(i,-1,!0),{intervalDuration:o,intervalUnit:s,intervalStart:r,intervalEnd:a,start:n,end:i}},computePrevDate:function(t){return this.massageCurrentDate(t.clone().startOf(this.intervalUnit).subtract(this.intervalDuration),-1)},computeNextDate:function(t){return this.massageCurrentDate(t.clone().startOf(this.intervalUnit).add(this.intervalDuration))},massageCurrentDate:function(t,n){return this.intervalDuration<=e.duration({days:1})&&this.isHiddenDay(t)&&(t=this.skipHiddenDays(t,n),t.startOf("day")),t},updateTitle:function(){this.title=this.computeTitle()},computeTitle:function(){return this.formatRange({start:this.intervalStart,end:this.intervalEnd},this.opt("titleFormat")||this.computeTitleFormat(),this.opt("titleRangeSeparator"))},computeTitleFormat:function(){return"year"==this.intervalUnit?"YYYY":"month"==this.intervalUnit?this.opt("monthYearFormat"):this.intervalDuration.as("days")>1?"ll":"LL"},formatRange:function(t,e,n){var i=t.end;return i.hasTime()||(i=i.clone().subtract(1)),Z(t.start,i,e,n,this.opt("isRTL"))},renderView:function(){this.render(),this.updateSize(),this.initializeScroll(),this.trigger("viewRender",this,this,this.el),t(document).on("mousedown",this.documentMousedownProxy)},render:function(){},destroyView:function(){this.unselect(),this.destroyViewEvents(),this.destroy(),this.trigger("viewDestroy",this,this,this.el),t(document).off("mousedown",this.documentMousedownProxy)},destroy:function(){this.el.empty()},initTheming:function(){var t=this.opt("theme")?"ui":"fc";this.widgetHeaderClass=t+"-widget-header",this.widgetContentClass=t+"-widget-content",this.highlightStateClass=t+"-state-highlight"},updateSize:function(t){t&&this.recordScroll(),this.updateHeight(),this.updateWidth()},updateWidth:function(){},updateHeight:function(){var t=this.calendar;this.setHeight(t.getSuggestedViewHeight(),t.isHeightAuto())},setHeight:function(){},computeScrollerHeight:function(t,e){var n,i;return e=e||this.scrollerEl,n=this.el.add(e),n.css({position:"relative",left:-1}),i=this.el.outerHeight()-e.height(),n.css({position:"",left:""}),t-i},initializeScroll:function(){},recordScroll:function(){this.scrollerEl&&(this.scrollTop=this.scrollerEl.scrollTop())},restoreScroll:function(){null!==this.scrollTop&&this.scrollerEl.scrollTop(this.scrollTop)},renderViewEvents:function(t){this.renderEvents(t),this.eventSegEach(function(t){this.trigger("eventAfterRender",t.event,t.event,t.el)}),this.trigger("eventAfterAllRender")},renderEvents:function(){},destroyViewEvents:function(){this.eventSegEach(function(t){this.trigger("eventDestroy",t.event,t.event,t.el)}),this.destroyEvents()},destroyEvents:function(){},resolveEventEl:function(e,n){var i=this.trigger("eventRender",e,e,n);return!1===i?n=null:i&&!0!==i&&(n=t(i)),n},showEvent:function(t){this.eventSegEach(function(t){t.el.css("visibility","")},t)},hideEvent:function(t){this.eventSegEach(function(t){t.el.css("visibility","hidden")},t)},eventSegEach:function(t,e){var n,i=this.getEventSegs();for(n=0;i.length>n;n++)e&&i[n].event._id!==e._id||t.call(this,i[n])},getEventSegs:function(){return[]},isEventDraggable:function(t){var e=t.source||{};return M(t.startEditable,e.startEditable,this.opt("eventStartEditable"),t.editable,e.editable,this.opt("editable"))},reportEventDrop:function(t,e,n,i){var o=this.calendar,s=o.mutateEvent(t,e),r=function(){s.undo(),o.reportEventChange()};this.triggerEventDrop(t,s.dateDelta,r,n,i),o.reportEventChange()},triggerEventDrop:function(t,e,n,i,o){this.trigger("eventDrop",i[0],t,e,n,o,{})},reportExternalDrop:function(e,n,i,o,s){var r,a,l=e.eventProps;l&&(r=t.extend({},l,n),a=this.calendar.renderEvent(r,e.stick)[0]),this.triggerExternalDrop(a,n,i,o,s)},triggerExternalDrop:function(t,e,n,i,o){this.trigger("drop",n[0],e.start,i,o),t&&this.trigger("eventReceive",null,t)},renderDrag:function(){},destroyDrag:function(){},isEventResizable:function(t){var e=t.source||{};return M(t.durationEditable,e.durationEditable,this.opt("eventDurationEditable"),t.editable,e.editable,this.opt("editable"))},reportEventResize:function(t,e,n,i){var o=this.calendar,s=o.mutateEvent(t,{end:e}),r=function(){s.undo(),o.reportEventChange()};this.triggerEventResize(t,s.durationDelta,r,n,i),o.reportEventChange()},triggerEventResize:function(t,e,n,i,o){this.trigger("eventResize",i[0],t,e,n,o,{})},select:function(t,e){this.unselect(e),this.renderSelection(t),this.reportSelection(t,e)},renderSelection:function(){},reportSelection:function(t,e){this.isSelected=!0,this.trigger("select",null,t.start,t.end,e)},unselect:function(t){this.isSelected&&(this.isSelected=!1,this.destroySelection(),this.trigger("unselect",null,t))},destroySelection:function(){},documentMousedown:function(e){var n;this.isSelected&&this.opt("unselectAuto")&&v(e)&&((n=this.opt("unselectCancel"))&&t(e.target).closest(n).length||this.unselect(e))},initHiddenDays:function(){var e,n=this.opt("hiddenDays")||[],i=[],o=0;for(!1===this.opt("weekends")&&n.push(0,6),e=0;7>e;e++)(i[e]=-1!==t.inArray(e,n))||o++;if(!o)throw"invalid hiddenDays";this.isHiddenDayHash=i},isHiddenDay:function(t){return e.isMoment(t)&&(t=t.day()),this.isHiddenDayHash[t]},skipHiddenDays:function(t,e,n){var i=t.clone();for(e=e||1;this.isHiddenDayHash[(i.day()+(n?e:0)+7)%7];)i.add(e,"days");return i},computeDayRange:function(t){var e,n=t.start.clone().stripTime(),i=t.end,o=null;return i&&(o=i.clone().stripTime(),(e=+i.time())&&e>=this.nextDayThreshold&&o.add(1,"days")),(!i||n>=o)&&(o=n.clone().add(1,"days")),{start:n,end:o}},isMultiDayEvent:function(t){var e=this.computeDayRange(t);return e.end.diff(e.start,"days")>1}});St.sourceNormalizers=[],St.sourceFetchers=[];var Qt={dataType:"json",cache:!1},Kt=1,Jt=Dt.basic=Ut.extend({dayGrid:null,dayNumbersVisible:!1,weekNumbersVisible:!1,weekNumberWidth:null,headRowEl:null,initialize:function(){this.dayGrid=new Xt(this),this.coordMap=this.dayGrid.coordMap},setRange:function(t){Ut.prototype.setRange.call(this,t),this.dayGrid.breakOnWeeks=/year|month|week/.test(this.intervalUnit),this.dayGrid.setRange(t)},computeRange:function(t){var e=Ut.prototype.computeRange.call(this,t);return/year|month/.test(e.intervalUnit)&&(e.start.startOf("week"),e.start=this.skipHiddenDays(e.start),e.end.weekday()&&(e.end.add(1,"week").startOf("week"),e.end=this.skipHiddenDays(e.end,-1,!0))),e},render:function(){this.dayNumbersVisible=this.dayGrid.rowCnt>1,this.weekNumbersVisible=this.opt("weekNumbers"),this.dayGrid.numbersVisible=this.dayNumbersVisible||this.weekNumbersVisible,this.el.addClass("fc-basic-view").html(this.renderHtml()),this.headRowEl=this.el.find("thead .fc-row"),this.scrollerEl=this.el.find(".fc-day-grid-container"),this.dayGrid.coordMap.containerEl=this.scrollerEl,this.dayGrid.el=this.el.find(".fc-day-grid"),this.dayGrid.render(this.hasRigidRows())},destroy:function(){this.dayGrid.destroy(),Ut.prototype.destroy.call(this)},renderHtml:function(){return'<table><thead><tr><td class="'+this.widgetHeaderClass+'">'+this.dayGrid.headHtml()+'</td></tr></thead><tbody><tr><td class="'+this.widgetContentClass+'"><div class="fc-day-grid-container"><div class="fc-day-grid"/></div></td></tr></tbody></table>'},headIntroHtml:function(){return this.weekNumbersVisible?'<th class="fc-week-number '+this.widgetHeaderClass+'" '+this.weekNumberStyleAttr()+"><span>"+I(this.opt("weekNumberTitle"))+"</span></th>":void 0},numberIntroHtml:function(t){return this.weekNumbersVisible?'<td class="fc-week-number" '+this.weekNumberStyleAttr()+"><span>"+this.calendar.calculateWeekNumber(this.dayGrid.getCell(t,0).start)+"</span></td>":void 0},dayIntroHtml:function(){return this.weekNumbersVisible?'<td class="fc-week-number '+this.widgetContentClass+'" '+this.weekNumberStyleAttr()+"></td>":void 0},introHtml:function(){return this.weekNumbersVisible?'<td class="fc-week-number" '+this.weekNumberStyleAttr()+"></td>":void 0},numberCellHtml:function(t){var e,n=t.start;return this.dayNumbersVisible?(e=this.dayGrid.getDayClasses(n),e.unshift("fc-day-number"),'<td class="'+e.join(" ")+'" data-date="'+n.format()+'">'+n.date()+"</td>"):"<td/>"},weekNumberStyleAttr:function(){return null!==this.weekNumberWidth?'style="width:'+this.weekNumberWidth+'px"':""},hasRigidRows:function(){var t=this.opt("eventLimit");return t&&"number"!=typeof t},updateWidth:function(){this.weekNumbersVisible&&(this.weekNumberWidth=h(this.el.find(".fc-week-number")))},setHeight:function(t,e){var n,i=this.opt("eventLimit");p(this.scrollerEl),a(this.headRowEl),this.dayGrid.destroySegPopover(),i&&"number"==typeof i&&this.dayGrid.limitRows(i),n=this.computeScrollerHeight(t),this.setGridHeight(n,e),i&&"number"!=typeof i&&this.dayGrid.limitRows(i),!e&&f(this.scrollerEl,n)&&(r(this.headRowEl,m(this.scrollerEl)),n=this.computeScrollerHeight(t),this.scrollerEl.height(n),this.restoreScroll())},setGridHeight:function(t,e){e?u(this.dayGrid.rowEls):c(this.dayGrid.rowEls,t,!0)},renderEvents:function(t){this.dayGrid.renderEvents(t),this.updateHeight()},getEventSegs:function(){return this.dayGrid.getEventSegs()},destroyEvents:function(){this.recordScroll(),this.dayGrid.destroyEvents()},renderDrag:function(t,e){return this.dayGrid.renderDrag(t,e)},destroyDrag:function(){this.dayGrid.destroyDrag()},renderSelection:function(t){this.dayGrid.renderSelection(t)},destroySelection:function(){this.dayGrid.destroySelection()}});n({fixedWeekCount:!0}),(Dt.month=Jt.extend({computeRange:function(t){var e,n=Jt.prototype.computeRange.call(this,t);return this.isFixedWeeks()&&(e=Math.ceil(n.end.diff(n.start,"weeks",!0)),n.end.add(6-e,"weeks")),n},setGridHeight:function(t,e){e=e||"variable"===this.opt("weekMode"),e&&(t*=this.rowCnt/6),c(this.dayGrid.rowEls,t,!e)},isFixedWeeks:function(){var t=this.opt("weekMode");return t?"fixed"===t:this.opt("fixedWeekCount")}})).duration={months:1},Dt.basicWeek={type:"basic",duration:{weeks:1}},Dt.basicDay={type:"basic",duration:{days:1}},n({allDaySlot:!0,allDayText:"all-day",scrollTime:"06:00:00",slotDuration:"00:30:00",minTime:"00:00:00",maxTime:"24:00:00",slotEventOverlap:!0}),Dt.agenda=Ut.extend({timeGrid:null,dayGrid:null,axisWidth:null,noScrollRowEls:null,bottomRuleEl:null,bottomRuleHeight:null,initialize:function(){this.timeGrid=new qt(this),this.opt("allDaySlot")?(this.dayGrid=new Xt(this),this.coordMap=new Yt([this.dayGrid.coordMap,this.timeGrid.coordMap])):this.coordMap=this.timeGrid.coordMap},setRange:function(t){Ut.prototype.setRange.call(this,t),this.timeGrid.setRange(t),this.dayGrid&&this.dayGrid.setRange(t)},render:function(){this.el.addClass("fc-agenda-view").html(this.renderHtml()),this.scrollerEl=this.el.find(".fc-time-grid-container"),this.timeGrid.coordMap.containerEl=this.scrollerEl,this.timeGrid.el=this.el.find(".fc-time-grid"),this.timeGrid.render(),this.bottomRuleEl=t('<hr class="'+this.widgetHeaderClass+'"/>').appendTo(this.timeGrid.el),this.dayGrid&&(this.dayGrid.el=this.el.find(".fc-day-grid"),this.dayGrid.render(),this.dayGrid.bottomCoordPadding=this.dayGrid.el.next("hr").outerHeight()),this.noScrollRowEls=this.el.find(".fc-row:not(.fc-scroller *)")},destroy:function(){this.timeGrid.destroy(),this.dayGrid&&this.dayGrid.destroy(),Ut.prototype.destroy.call(this)},renderHtml:function(){return'<table><thead><tr><td class="'+this.widgetHeaderClass+'">'+this.timeGrid.headHtml()+'</td></tr></thead><tbody><tr><td class="'+this.widgetContentClass+'">'+(this.dayGrid?'<div class="fc-day-grid"/><hr class="'+this.widgetHeaderClass+'"/>':"")+'<div class="fc-time-grid-container"><div class="fc-time-grid"/></div></td></tr></tbody></table>'},headIntroHtml:function(){var t,e,n,i;return this.opt("weekNumbers")?(t=this.timeGrid.getCell(0).start,e=this.calendar.calculateWeekNumber(t),n=this.opt("weekNumberTitle"),i=this.opt("isRTL")?e+n:n+e,'<th class="fc-axis fc-week-number '+this.widgetHeaderClass+'" '+this.axisStyleAttr()+"><span>"+I(i)+"</span></th>"):'<th class="fc-axis '+this.widgetHeaderClass+'" '+this.axisStyleAttr()+"></th>"},dayIntroHtml:function(){return'<td class="fc-axis '+this.widgetContentClass+'" '+this.axisStyleAttr()+"><span>"+(this.opt("allDayHtml")||I(this.opt("allDayText")))+"</span></td>"},slotBgIntroHtml:function(){return'<td class="fc-axis '+this.widgetContentClass+'" '+this.axisStyleAttr()+"></td>"},introHtml:function(){return'<td class="fc-axis" '+this.axisStyleAttr()+"></td>"},axisStyleAttr:function(){return null!==this.axisWidth?'style="width:'+this.axisWidth+'px"':""},updateSize:function(t){t&&this.timeGrid.resize(),Ut.prototype.updateSize.call(this,t)},updateWidth:function(){this.axisWidth=h(this.el.find(".fc-axis"))},setHeight:function(t,e){var n,i;null===this.bottomRuleHeight&&(this.bottomRuleHeight=this.bottomRuleEl.outerHeight()),this.bottomRuleEl.hide(),this.scrollerEl.css("overflow",""),p(this.scrollerEl),a(this.noScrollRowEls),this.dayGrid&&(this.dayGrid.destroySegPopover(),n=this.opt("eventLimit"),n&&"number"!=typeof n&&(n=5),n&&this.dayGrid.limitRows(n)),e||(i=this.computeScrollerHeight(t),f(this.scrollerEl,i)?(r(this.noScrollRowEls,m(this.scrollerEl)),i=this.computeScrollerHeight(t),this.scrollerEl.height(i),this.restoreScroll()):(this.scrollerEl.height(i).css("overflow","hidden"),this.bottomRuleEl.show()))},initializeScroll:function(){function t(){n.scrollerEl.scrollTop(o)}var n=this,i=e.duration(this.opt("scrollTime")),o=this.timeGrid.computeTimeTop(i);o=Math.ceil(o),o&&o++,t(),setTimeout(t,0)},renderEvents:function(t){var e,n=[],i=[];for(e=0;t.length>e;e++)t[e].allDay?n.push(t[e]):i.push(t[e]);this.timeGrid.renderEvents(i),this.dayGrid&&this.dayGrid.renderEvents(n),this.updateHeight()},getEventSegs:function(){return this.timeGrid.getEventSegs().concat(this.dayGrid?this.dayGrid.getEventSegs():[])},destroyEvents:function(){this.recordScroll(),this.timeGrid.destroyEvents(),this.dayGrid&&this.dayGrid.destroyEvents()},renderDrag:function(t,e){return t.start.hasTime()?this.timeGrid.renderDrag(t,e):this.dayGrid?this.dayGrid.renderDrag(t,e):void 0},destroyDrag:function(){this.timeGrid.destroyDrag(),this.dayGrid&&this.dayGrid.destroyDrag()},renderSelection:function(t){t.start.hasTime()||t.end.hasTime()?this.timeGrid.renderSelection(t):this.dayGrid&&this.dayGrid.renderSelection(t)},destroySelection:function(){this.timeGrid.destroySelection(),this.dayGrid&&this.dayGrid.destroySelection()}}),Dt.agendaWeek={type:"agenda",duration:{weeks:1}},Dt.agendaDay={type:"agenda",duration:{days:1}}}),function(){function t(t,n,i,o){var s=$("#appointments-calendar"),r=s.data("patient-id"),a=s.data("professional-id"),l={start:t.toISOString(),end:n.toISOString()};a?InternalAPI.professionals.appointments.index(a,l).done(function(t){o(e(t))}):r&&InternalAPI.patients.appointments.index(r,l).done(function(t){o(e(t))})}function e(t){return $(t.data).map(function(t,e){return{id:e.id,title:e.attributes.patient_name,start:moment(e.attributes.begin_date,moment.ISO_8601),end:moment(e.attributes.end_date,moment.ISO_8601)}})}function n(t,e,n,i){var o=$("#appointments-calendar");if("month"===i.name)o.fullCalendar("gotoDate",t),o.fullCalendar("changeView","agendaDay");else{var s=$("#manage-appointment-modal");s.data("begin-date",t.toISOString()),s.data("end-date",e.toISOString()),s.data("new-patient-appointment-url")?s.trigger("nt.appointment.modal.prepare.remote.createWithPatient"):s.trigger("nt.appointment.modal.prepare.remote.create"),s.modal("show"),o.fullCalendar("unselect")}}function i(t){var e=$("#manage-appointment-modal"),n="#manage-appointment-form-container",i=e.data("create-appointment-url")+"/"+t.id;e.data("update-appointment-url",i),e.data("calendar-event-id",t.id),e.trigger("prepare.nt.appointment.modal.remote.update-and-cancel"),e.find(n).html(Nutrium.templates.loading.wave()),RemotePartials.get({url:i,container:n,partial:"appointments/manage/form"}).done(function(){Nutrium.libs.bs.enableTooltips({container:n}),e.trigger("nt.appointment.modal.enable.datetimepicker")}),e.modal("show")}function o(t){var e=$("#manage-appointment-modal"),n=e.data("create-appointment-url")+"/"+t.id,i=[{name:"appointment[begin_date]",value:t.start.toISOString()},{name:"appointment[end_date]",value:t.end.toISOString()}];RemotePartials.patch({url:n,params:i}).done(function(){$("#wrapper").trigger("updated.nt.appointment")}).fail(function(){$("#appointments-calendar").fullCalendar("refetchEvents")})}$(document).ready(function(){$("#appointments-calendar").fullCalendar({lang:moment.locale(),timezone:moment().tz(),slotDuration:"00:15:00",allDaySlot:!1,minTime:"07:00:00",timeFormat:"H:mm",axisFormat:"HH:mm",height:"auto",header:{left:"prev,next today",center:"title",right:"month,agendaWeek,agendaDay"},buttonText:{today:I18n.t("frontend.defaults.views.words.today"),month:I18n.t("frontend.defaults.views.words.month"),week:I18n.t("frontend.defaults.views.words.week"),day:I18n.t("frontend.defaults.views.words.day")},events:t,editable:!0,droppable:!0,selectable:!0,eventResize:o,eventDrop:o,select:n,eventClick:i})})}(),function(){function t(){$("#appointments-widget").find(".widget-header").on("click",".action",function(){var t=$("#manage-appointment-modal");t.data("begin-date",moment().toISOString()),t.data("end-date",moment().add("30","minutes").toISOString()),t.data("new-patient-appointment-url")?t.trigger("nt.appointment.modal.prepare.remote.createWithPatient"):t.trigger("nt.appointment.modal.prepare.remote.create"),t.modal("show")})}$(document).ready(function(){t()})}(),/*
 * Toastr
 * Copyright 2012-2015
 * Authors: John Papa, Hans Fjällemark, and Tim Ferrell.
 * All Rights Reserved.
 * Use, reproduction, distribution, and modification of this code is subject to the terms and
 * conditions of the MIT license, available at http://www.opensource.org/licenses/mit-license.php
 *
 * ARIA Support: Greta Krafsig
 *
 * Project: https://github.com/CodeSeven/toastr
 */
    function(t){t(["jquery"],function(t){return function(){function e(t,e,n){return p({type:C.error,iconClass:g().iconClasses.error,message:t,optionsOverride:n,title:e})}function n(e,n){return e||(e=g()),v=t("#"+e.containerId),v.length?v:(n&&(v=u(e)),v)}function i(t,e,n){return p({type:C.info,iconClass:g().iconClasses.info,message:t,optionsOverride:n,title:e})}function o(t){y=t}function s(t,e,n){return p({type:C.success,iconClass:g().iconClasses.success,message:t,optionsOverride:n,title:e})}function r(t,e,n){return p({type:C.warning,iconClass:g().iconClasses.warning,message:t,optionsOverride:n,title:e})}function a(t,e){var i=g();v||n(i),c(t,i,e)||d(i)}function l(e){var i=g();if(v||n(i),e&&0===t(":focus",e).length)return void m(e);v.children().length&&v.remove()}function d(e){for(var n=v.children(),i=n.length-1;i>=0;i--)c(t(n[i]),e)}function c(e,n,i){var o=!(!i||!i.force)&&i.force;return!(!e||!o&&0!==t(":focus",e).length)&&(e[n.hideMethod]({duration:n.hideDuration,easing:n.hideEasing,complete:function(){m(e)}}),!0)}function u(e){return v=t("<div/>").attr("id",e.containerId).addClass(e.positionClass),v.appendTo(t(e.target)),v}function h(){return{tapToDismiss:!0,toastClass:"toast",containerId:"toast-container",debug:!1,showMethod:"fadeIn",showDuration:300,showEasing:"swing",onShown:undefined,hideMethod:"fadeOut",hideDuration:1e3,hideEasing:"swing",onHidden:undefined,closeMethod:!1,closeDuration:!1,closeEasing:!1,closeOnHover:!0,extendedTimeOut:1e3,iconClasses:{error:"toast-error",info:"toast-info",success:"toast-success",warning:"toast-warning"},iconClass:"toast-info",positionClass:"toast-top-right",timeOut:5e3,titleClass:"toast-title",messageClass:"toast-message",escapeHtml:!1,target:"body",closeHtml:'<button type="button">&times;</button>',closeClass:"toast-close-button",newestOnTop:!0,preventDuplicates:!1,progressBar:!1,progressClass:"toast-progress",rtl:!1}}function f(t){y&&y(t)}function p(e){function i(t){return null==t&&(t=""),t.replace(/&/g,"&amp;").replace(/"/g,"&quot;").replace(/'/g,"&#39;").replace(/</g,"&lt;").replace(/>/g,"&gt;")}function o(){l(),c(),u(),h(),p(),y(),d(),s()}function s(){var t="";switch(e.iconClass){case"toast-success":case"toast-info":t="polite";break;default:t="assertive"}R.attr("aria-live",t)}function r(){_.closeOnHover&&R.hover(D,S),!_.onclick&&_.tapToDismiss&&R.click(E),_.closeButton&&O&&O.click(function(t){t.stopPropagation?t.stopPropagation():t.cancelBubble!==undefined&&!0!==t.cancelBubble&&(t.cancelBubble=!0),_.onCloseClick&&_.onCloseClick(t),E(!0)}),_.onclick&&R.click(function(t){_.onclick(t),E()})}function a(){R.hide(),R[_.showMethod]({duration:_.showDuration,easing:_.showEasing,complete:_.onShown}),_.timeOut>0&&(H=setTimeout(E,_.timeOut),P.maxHideTime=parseFloat(_.timeOut),P.hideEta=(new Date).getTime()+P.maxHideTime,_.progressBar&&(P.intervalId=setInterval(T,10)))}function l(){e.iconClass&&R.addClass(_.toastClass).addClass(x)}function d(){_.newestOnTop?v.prepend(R):v.append(R)}function c(){if(e.title){var t=e.title;_.escapeHtml&&(t=i(e.title)),k.append(t).addClass(_.titleClass),R.append(k)}}function u(){if(e.message){var t=e.message;_.escapeHtml&&(t=i(e.message)),M.append(t).addClass(_.messageClass),R.append(M)}}function h(){_.closeButton&&(O.addClass(_.closeClass).attr("role","button"),R.prepend(O))}function p(){_.progressBar&&(I.addClass(_.progressClass),R.prepend(I))}function y(){_.rtl&&R.addClass("rtl")}function C(t,e){if(t.preventDuplicates){if(e.message===w)return!0;w=e.message}return!1}function E(e){var n=e&&!1!==_.closeMethod?_.closeMethod:_.hideMethod,i=e&&!1!==_.closeDuration?_.closeDuration:_.hideDuration,o=e&&!1!==_.closeEasing?_.closeEasing:_.hideEasing;if(!t(":focus",R).length||e)return clearTimeout(P.intervalId),R[n]({duration:i,easing:o,complete:function(){m(R),clearTimeout(H),_.onHidden&&"hidden"!==F.state&&_.onHidden(),F.state="hidden",F.endTime=new Date,f(F)}})}function S(){(_.timeOut>0||_.extendedTimeOut>0)&&(H=setTimeout(E,_.extendedTimeOut),P.maxHideTime=parseFloat(_.extendedTimeOut),P.hideEta=(new Date).getTime()+P.maxHideTime)}function D(){clearTimeout(H),P.hideEta=0,R.stop(!0,!0)[_.showMethod]({duration:_.showDuration,easing:_.showEasing})}function T(){var t=(P.hideEta-(new Date).getTime())/P.maxHideTime*100;I.width(t+"%")}var _=g(),x=e.iconClass||_.iconClass;if("undefined"!=typeof e.optionsOverride&&(_=t.extend(_,e.optionsOverride),x=e.optionsOverride.iconClass||x),!C(_,e)){b++,v=n(_,!0);var H=null,R=t("<div/>"),k=t("<div/>"),M=t("<div/>"),I=t("<div/>"),O=t(_.closeHtml),P={intervalId:null,hideEta:null,maxHideTime:null},F={toastId:b,state:"visible",startTime:new Date,options:_,map:e};return o(),a(),r(),f(F),_.debug&&console&&console.log(F),R}}function g(){return t.extend({},h(),E.options)}function m(t){v||(v=n()),t.is(":visible")||(t.remove(),t=null,0===v.children().length&&(v.remove(),w=undefined))}var v,y,w,b=0,C={error:"error",info:"info",success:"success",warning:"warning"},E={clear:a,remove:l,error:e,getContainer:n,info:i,options:{},subscribe:o,success:s,version:"2.1.3",warning:r};return E}()})}("function"==typeof define&&define.amd?define:function(t,e){"undefined"!=typeof module&&module.exports?module.exports=e(require("jquery")):window.toastr=e(window.jQuery)}),toastr.options.iconClasses={error:"toast-content error",info:"toast-info",success:"toast-content success",warning:"toast-warning"},function(){function t(){$("#appointment-note-widget").find(".appointment-note-open-action").on("click",function(){var t=$(this).data("appointment-id");l.data("appointment-id",t),l.modal("show"),InternalAPI.appointments.read(t).done(function(t){a(t)})})}function e(){l.on("hide.bs.modal",function(){var t=l.find(".scheduling-notes").find("textarea"),e=l.find(".final-notes").find("textarea");l.find("#appointment-note-loading").removeClass("hidden"),l.find("#appointment-note-form").addClass("hidden"),t.val(null),e.val(null),Nutrium.functions.textAreaAdjust({lineHeight:18.5,minNumberOfRows:2,textarea:t,shouldRemovePadding:!0}),Nutrium.functions.textAreaAdjust({lineHeight:18.5,minNumberOfRows:2,textarea:e,shouldRemovePadding:!0})})}function n(){l.modal("hide"),i()}function i(){t(),o()}function o(){var t=$("#appointments-notes-container").find(".page-navigation");t.removeClass("hidden"),t.find("a").on("click",function(t){t.preventDefault(),RemotePartials.get($(t.target).closest("a").attr("href")).done(i)})}function s(){l.find(".action-create").not(".disabled").on("click",function(){var t=$(this),e=t.html(),n=l.find(".scheduling-notes").find("textarea").val(),i=l.find(".final-notes").find("textarea").val(),o=l.data("appointment-id"),s={scheduling_notes:n,final_notes:i};Nutrium.functions.toggleButtonLoading(t),InternalAPI.appointments.update(o,s).done(r).always(function(){Nutrium.functions.toggleButtonLoading(t,e)})})}function r(){var t=$("#appointment-note-widget").find(".page-navigation").data("appointment-note-url");RemotePartials.get(t).done(n)}function a(t){var e=t.data.attributes.begin_date,n=t.data.attributes.scheduling_notes,i=t.data.attributes.final_notes,o=l.find(".scheduling-notes").find("textarea"),s=l.find(".final-notes").find("textarea");l.find(".date").find(".field-content").text(moment(e).format("L")),o.val(n),s.val(i),l.find("#appointment-note-loading").addClass("hidden"),l.find("#appointment-note-form").removeClass("hidden"),Nutrium.functions.textAreaAdjust({lineHeight:18.5,minNumberOfRows:2,textarea:o,shouldRemovePadding:!0}),Nutrium.functions.textAreaAdjust({lineHeight:18.5,minNumberOfRows:2,textarea:s,shouldRemovePadding:!0})}var l;$(document).ready(function(){l=$("#appointment-note-modal"),t(),o(),e(),s()})}(),function(){function t(){var t=$(".patient-default-conversations-enabled-field"),a=$(".patient-default-weight-registration-enabled-field"),l=$(".patient-default-mobile-access-enabled-field"),d=$(".conversations-enabled-field"),c=$(".weight-registration-enabled-field"),u=$(".mobile-access-enabled-field");e(t),n(t),e(d),n(d),i(a),o(a),i(c),o(c),s(l),r(l),s(u),r(u)}function e(t){t.find(".enable-conversations-for-all-patients").on("click",function(){swal({title:I18n.t("frontend.professional_settings.follow_up_features.conversations_enabled.enable_conversations_for_all_patients.modal.title"),text:I18n.t("frontend.professional_settings.follow_up_features.conversations_enabled.enable_conversations_for_all_patients.modal.description"),showCancelButton:!0,confirmButtonColor:Nutrium.colors.green,confirmButtonText:I18n.t("frontend.defaults.views.words.activate"),cancelButtonText:I18n.t("frontend.defaults.views.words.cancel"),closeOnConfirm:!1,showLoaderOnConfirm:!0},function(){InternalAPI.professional_settings.enable_conversations_for_all_patients().done(function(){t.hasClass("conversations-enabled-field")&&t.find(".editable").editable("setValue",!0),swal(I18n.t("frontend.professional_settings.follow_up_features.conversations_enabled.enable_conversations_for_all_patients.modal.success"),"","success")})})})}function n(t){t.find(".disable-conversations-for-all-patients").on("click",function(){swal({title:I18n.t("frontend.professional_settings.follow_up_features.conversations_enabled.disable_conversations_for_all_patients.modal.title"),text:I18n.t("frontend.professional_settings.follow_up_features.conversations_enabled.disable_conversations_for_all_patients.modal.description"),showCancelButton:!0,confirmButtonColor:Nutrium.colors.red,confirmButtonText:I18n.t("frontend.defaults.views.words.deactivate"),cancelButtonText:I18n.t("frontend.defaults.views.words.cancel"),closeOnConfirm:!1,showLoaderOnConfirm:!0},function(){InternalAPI.professional_settings.disable_conversations_for_all_patients().done(function(){t.hasClass("conversations-enabled-field")&&t.find(".editable").editable("setValue",!1),swal(I18n.t("frontend.professional_settings.follow_up_features.conversations_enabled.disable_conversations_for_all_patients.modal.success"),"","success")})})})}function i(t){t.find(".enable-weight-registration-for-all-patients").on("click",function(){swal({title:I18n.t("frontend.professional_settings.follow_up_features.weight_registration_enabled.enable_weight_registration_for_all_patients.modal.title"),text:I18n.t("frontend.professional_settings.follow_up_features.weight_registration_enabled.enable_weight_registration_for_all_patients.modal.description"),showCancelButton:!0,confirmButtonColor:Nutrium.colors.green,confirmButtonText:I18n.t("frontend.defaults.views.words.activate"),cancelButtonText:I18n.t("frontend.defaults.views.words.cancel"),closeOnConfirm:!1,showLoaderOnConfirm:!0},function(){InternalAPI.professional_settings.enable_weight_registration_for_all_patients().done(function(){t.hasClass("weight-registration-enabled-field")&&t.find(".editable").editable("setValue",!0),swal(I18n.t("frontend.professional_settings.follow_up_features.weight_registration_enabled.enable_weight_registration_for_all_patients.modal.success"),"","success")})})})}function o(t){t.find(".disable-weight-registration-for-all-patients").on("click",function(){swal({title:I18n.t("frontend.professional_settings.follow_up_features.weight_registration_enabled.disable_weight_registration_for_all_patients.modal.title"),text:I18n.t("frontend.professional_settings.follow_up_features.weight_registration_enabled.disable_weight_registration_for_all_patients.modal.description"),showCancelButton:!0,confirmButtonColor:Nutrium.colors.red,confirmButtonText:I18n.t("frontend.defaults.views.words.deactivate"),cancelButtonText:I18n.t("frontend.defaults.views.words.cancel"),closeOnConfirm:!1,showLoaderOnConfirm:!0},function(){InternalAPI.professional_settings.disable_weight_registration_for_all_patients().done(function(){t.hasClass("weight-registration-enabled-field")&&t.find(".editable").editable("setValue",!1),swal(I18n.t("frontend.professional_settings.follow_up_features.weight_registration_enabled.disable_weight_registration_for_all_patients.modal.success"),"","success")})})})}function s(t){t.find(".enable-mobile-access-for-all-patients").on("click",function(){swal({title:I18n.t("frontend.professionals.patients.preferences.mobile_access.enable_mobile_access_for_all_patients.modal.title"),text:I18n.t("frontend.professionals.patients.preferences.mobile_access.enable_mobile_access_for_all_patients.modal.description"),showCancelButton:!0,confirmButtonColor:Nutrium.colors.green,confirmButtonText:I18n.t("frontend.defaults.views.words.activate"),cancelButtonText:I18n.t("frontend.defaults.views.words.cancel"),closeOnConfirm:!1,showLoaderOnConfirm:!0},function(){InternalAPI.professional_settings.enable_mobile_access_for_all_patients().done(function(){t.hasClass("mobile-access-enabled-field")&&t.find(".editable").editable("setValue",!0),swal(I18n.t("frontend.professionals.patients.preferences.mobile_access.enable_mobile_access_for_all_patients.modal.success"),"","success")})})})}function r(t){t.find(".disable-mobile-access-for-all-patients").on("click",function(){swal({title:I18n.t("frontend.professionals.patients.preferences.mobile_access.disable_mobile_access_for_all_patients.modal.title"),text:I18n.t("frontend.professionals.patients.preferences.mobile_access.disable_mobile_access_for_all_patients.modal.description"),showCancelButton:!0,confirmButtonColor:Nutrium.colors.red,confirmButtonText:I18n.t("frontend.defaults.views.words.deactivate"),cancelButtonText:I18n.t("frontend.defaults.views.words.cancel"),closeOnConfirm:!1,showLoaderOnConfirm:!0},function(){InternalAPI.professional_settings.disable_mobile_access_for_all_patients().done(function(){t.hasClass("mobile-access-enabled-field")&&t.find(".editable").editable("setValue",!1),swal(I18n.t("frontend.professionals.patients.preferences.mobile_access.disable_mobile_access_for_all_patients.modal.success"),"","success")})})})}$(document).ready(function(){t()})}(),function(){function t(){$("#widget-application").find(".action-edit").on("click",function(){var t=$(this);InternalAPI.cache.clear(),InternalAPI.patients.replace_password(t.data("patient-id")).done(function(e){t.closest(".field-text").find(".field-content").removeClass("field-placeholder").html(e.data.attributes.password)})})}function e(){$("#widget-application").find(".app-send-instructions").find(".field-action").on("click",function(){var t=$(this),e=t.text();Nutrium.functions.toggleButtonLoading(t),InternalAPI.patients.send_reset_password_instructions(t.data("patient-id")).done(function(){toastr.success(I18n.t("frontend.professionals.appointments.next.application.instructions.sent"))}).fail(function(){toastr.error(I18n.t("frontend.defaults.errors.message"))}).always(function(){Nutrium.functions.toggleButtonLoading(t,e)})})}function n(){$("#widget-deliverables").find("select").select2({dropdownCssClass:"clinics-list field-editable field-dropdown",dropdownAutoWidth:!0,formatResult:i(!0),formatSelection:i(),formatNoMatches:function(){return I18n.t("frontend.defaults.errors.no_results")}}).on("change",function(){o("#print-meal-plan","href",$(this).val()),store.enabled&&store.set("current_clinic",$(this).val())})}function i(t){return function(e){var n=$(e.element).closest("select").siblings(".select2-custom-options").clone().removeClass("hidden");return n.length?(n.find("img").attr("src",$(e.element).data("clinic-logo-url")),t&&n.find(".text").html(e.text),n):e.text}}function o(t,e,n){var i=$(t),o=i.attr(e);o.match(/clinic_id=\d+$/)?o=o.replace(/\d+$/,n):o+="?clinic_id="+n,i.attr(e,o)}function s(){var t=store.get("current_clinic"),e=$("select.clinics-list").find('option[value="'+t+'"]').length;store.enabled&&e&&$("select.clinics-list").val(t).trigger("change")}$(document).ready(function(){t(),e(),n(),s()})}();